function Map(){this.elements=new Array,this.size=function(){return this.elements.length},this.isEmpty=function(){return this.elements.length<1},this.clear=function(){this.elements=new Array},this.put=function(t,e){this.remove(t),this.elements.push({key:t,value:e})},this.remove=function(t){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==t)return this.elements.splice(i,1),!0}catch(e){return!1}return!1},this.get=function(t){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==t)return this.elements[i].value}catch(e){return null}},this.element=function(t){return 0>t||t>=this.elements.length?null:this.elements[t]},this.containsKey=function(t){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==t)return!0}catch(e){return!1}return!1},this.values=function(){var t=new Array;for(i=0;i<this.elements.length;i++)t.push(this.elements[i].value);return t},this.keys=function(){var t=new Array;for(i=0;i<this.elements.length;i++)t.push(this.elements[i].key);return t}}function initEnv(){if($("body").append(DWZ.frag.dwzFrag),$.browser.msie&&/6.0/.test(navigator.userAgent))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}$.browser.msie&&window.setInterval("CollectGarbage();",1e4),$(window).resize(function(){initLayout(),$(this).trigger("resizeGrid")});var e=$("#background,#progressBar");e.hide(),$(document).ajaxStart(function(){e.show()}).ajaxStop(function(){e.hide()}),$("#leftside").jBar({minW:150,maxW:700}),$.taskBar&&$.taskBar.init(),navTab.init(),$.fn.switchEnv&&$("#switchEnvBox").switchEnv(),$.fn.navMenu&&$("#navMenu").navMenu(),setTimeout(function(){initLayout(),initUI();var t=$("div.tabsPageHeader");t.find(".tabsLeft").hoverClass("tabsLeftHover"),t.find(".tabsRight").hoverClass("tabsRightHover"),t.find(".tabsMore").hoverClass("tabsMoreHover")},10)}function initLayout(){var t=$(window).width()-(DWZ.ui.sbar?$("#sidebar").width()+10:34)-5,e=$(window).height()-$("#header").height()-34;$("#container").width(t),$("#container .tabsPageContent").height(e-34).find("[layoutH]").layoutH(),$("#sidebar, #sidebar_s .collapse, #splitBar, #splitBarProxy").height(e-5),$("#taskbar").css({top:e+$("#header").height()+5,width:$(window).width()})}function initUI(_box){var $p=$(_box||document);$("table.table",$p).jTable(),$("table.list",$p).cssTable(),$("div.tabs",$p).each(function(){var t=$(this),e={};e.currentIndex=t.attr("currentIndex")||0,e.eventType=t.attr("eventType")||"click",t.tabs(e)}),$("ul.tree",$p).jTree(),$("div.accordion",$p).each(function(){var t=$(this);t.accordion({fillSpace:t.attr("fillSpace"),alwaysOpen:!0,active:0})}),$(":button.checkboxCtrl, :checkbox.checkboxCtrl",$p).checkboxCtrl($p),$.fn.combox&&$("select.combox",$p).combox(),$.fn.xheditor&&$("textarea.editor",$p).each(function(){var t=$(this),e={html5Upload:!1,skin:"vista",tools:t.attr("tools")||"full"},a=[["upLinkUrl","upLinkExt","zip,rar,txt"],["upImgUrl","upImgExt","jpg,jpeg,gif,png"],["upFlashUrl","upFlashExt","swf"],["upMediaUrl","upMediaExt","avi"]];$(a).each(function(i){var n=a[i][0],r=a[i][1];t.attr(n)&&(e[n]=t.attr(n),e[r]=t.attr(r)||a[i][2])}),t.xheditor(e)}),$.fn.uploadify&&$(":file[uploader]",$p).each(function(){var t=$(this),e={uploader:t.attr("uploader"),script:t.attr("script"),cancelImg:t.attr("cancelImg"),queueID:t.attr("fileQueue")||"fileQueue",fileDesc:t.attr("fileDesc")||"*.jpg;*.jpeg;*.gif;*.png;*.pdf",fileExt:t.attr("fileExt")||"*.jpg;*.jpeg;*.gif;*.png;*.pdf",folder:t.attr("folder"),auto:!0,multi:!0,onError:uploadifyError,onComplete:uploadifyComplete,onAllComplete:uploadifyAllComplete};t.attr("onComplete")&&(e.onComplete=DWZ.jsonEval(t.attr("onComplete"))),t.attr("onAllComplete")&&(e.onAllComplete=DWZ.jsonEval(t.attr("onAllComplete"))),t.attr("scriptData")&&(e.scriptData=DWZ.jsonEval(t.attr("scriptData"))),t.uploadify(e)}),$("input[type=text], input[type=password], textarea",$p).addClass("textInput").focusClass("focus"),$("input[readonly], textarea[readonly]",$p).addClass("readonly"),$("input[disabled=true], textarea[disabled=true]",$p).addClass("disabled"),$("input[type=text]",$p).not("div.tabs input[type=text]",$p).filter("[alt]").inputAlert(),$("div.panelBar li, div.panelBar",$p).hoverClass("hover"),$("div.button",$p).hoverClass("buttonHover"),$("div.buttonActive",$p).hoverClass("buttonActiveHover"),$("div.tabsHeader li, div.tabsPageHeader li, div.accordionHeader, div.accordion",$p).hoverClass("hover"),$("div.panel",$p).jPanel(),$("form.required-validate",$p).each(function(){$(this).validate({focusInvalid:!1,focusCleanup:!0,errorElement:"span",ignore:".ignore",invalidHandler:function(t,e){var a=e.numberOfInvalids();if(a){var i=DWZ.msg("validateFormError",[a]);alertMsg.error(i)}}})}),$.fn.datepicker&&$("input.date",$p).each(function(){var t=$(this),e={};t.attr("format")&&(e.pattern=t.attr("format")),t.attr("yearstart")&&(e.yearstart=t.attr("yearstart")),t.attr("yearend")&&(e.yearend=t.attr("yearend")),t.datepicker(e)}),$("a[target=navTab]",$p).each(function(){$(this).click(function(event){var $this=$(this),title=$this.attr("title")||$this.text(),tabid=$this.attr("rel")||"_blank",fresh=eval($this.attr("fresh")||"true"),external=eval($this.attr("external")||"false"),url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));return DWZ.debug(url),url.isFinishedTm()?(navTab.openTab(tabid,url,{title:title,fresh:fresh,external:external}),void event.preventDefault()):(alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1)})}),$("a[target=dialog]",$p).each(function(){$(this).click(function(event){var $this=$(this),title=$this.attr("title")||$this.text(),rel=$this.attr("rel")||"_blank",options={},w=$this.attr("width"),h=$this.attr("height");w&&(options.width=w),h&&(options.height=h),options.max=eval($this.attr("max")||"false"),options.mask=eval($this.attr("mask")||"false"),options.maxable=eval($this.attr("maxable")||"true"),options.minable=eval($this.attr("minable")||"true"),options.fresh=eval($this.attr("fresh")||"true"),options.resizable=eval($this.attr("resizable")||"true"),options.drawable=eval($this.attr("drawable")||"true"),options.close=eval($this.attr("close")||""),options.param=$this.attr("param")||"";var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));return DWZ.debug(url),url.isFinishedTm()?($.pdialog.open(url,rel,title,options),!1):(alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1)})}),$("a[target=dialogIds]",$p).each(function(){$(this).click(function(event){var $this=$(this),selectedIds=$this.attr("rel")||"ids",postType=$this.attr("postType")||"map",ids="",$box=navTab.getCurrentPanel();if($box.find("input:checked").filter("[name='"+selectedIds+"']").each(function(t){var e=$(this).val();ids+=0==t?e:","+e}),!ids)return alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var title=$this.attr("title")||$this.text(),rel=$this.attr("rel")||"_blank",options={},w=$this.attr("width"),h=$this.attr("height");w&&(options.width=w),h&&(options.height=h),options.max=eval($this.attr("max")||"false"),options.mask=eval($this.attr("mask")||"false"),options.maxable=eval($this.attr("maxable")||"true"),options.minable=eval($this.attr("minable")||"true"),options.fresh=eval($this.attr("fresh")||"true"),options.resizable=eval($this.attr("resizable")||"true"),options.drawable=eval($this.attr("drawable")||"true"),options.close=eval($this.attr("close")||""),options.param=$this.attr("param")||"";var url=unescape($this.attr("href"))+"/id/"+ids;return DWZ.debug(url),url.isFinishedTm()?($.pdialog.open(url,rel,title,options),!1):(alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1)})}),$("a[target=ajax]",$p).each(function(){$(this).click(function(t){var e=$(this),a=e.attr("rel");if(a){var i=$("#"+a);i.loadUrl(e.attr("href"),{},function(){i.find("[layoutH]").layoutH()})}t.preventDefault()})}),$("div.pagination",$p).each(function(){var t=$(this);t.pagination({targetType:t.attr("targetType"),rel:t.attr("rel"),totalCount:t.attr("totalCount"),numPerPage:t.attr("numPerPage"),pageNumShown:t.attr("pageNumShown"),currentPage:t.attr("currentPage")})}),$.fn.ajaxTodo&&$("a[target=ajaxTodo]",$p).ajaxTodo(),$.fn.dwzExport&&$("a[target=dwzExport]",$p).dwzExport(),$.fn.lookup&&$("a[lookupGroup]",$p).lookup(),$.fn.multLookup&&$("[multLookup]:button",$p).multLookup(),$.fn.suggest&&$("input[suggestFields]",$p).suggest(),$.fn.itemDetail&&$("table.itemDetail",$p).itemDetail(),$.fn.selectedTodo&&$("a[target=selectedTodo]",$p).selectedTodo(),$.fn.pagerForm&&$("form[rel=pagerForm]",$p).pagerForm({parentBox:$p})}function validateCallback(t,e){var a=$(t);return a.valid()?($.ajax({type:t.method||"POST",url:a.attr("action"),data:a.serializeArray(),dataType:"json",cache:!1,success:e||DWZ.ajaxDone,error:DWZ.ajaxError}),!1):!1}function iframeCallback(t,e){var a=$(t),i=$("#callbackframe");return a.valid()?(0==i.size()&&(i=$("<iframe id='callbackframe' name='callbackframe' src='about:blank' style='display:none'></iframe>").appendTo("body")),t.ajax||a.append('<input type="hidden" name="ajax" value="1" />'),t.target="callbackframe",void _iframeResponse(i[0],e||DWZ.ajaxDone)):!1}function _iframeResponse(t,e){var a=$(t),i=$(document);i.trigger("ajaxStart"),a.bind("load",function(){if(a.unbind("load"),i.trigger("ajaxStop"),"javascript:'%3Chtml%3E%3C/html%3E';"!=t.src&&"javascript:'<html></html>';"!=t.src){var n=t.contentDocument||t.document;if(!(n.readyState&&"complete"!=n.readyState||n.body&&"false"==n.body.innerHTML)){var r;if(n.XMLDocument)r=n.XMLDocument;else if(n.body)try{r=a.contents().find("body").html(),r=jQuery.parseJSON(r)}catch(s){r=n.body.innerHTML}else r=n;e(r)}}})}function navTabAjaxDone(t){DWZ.ajaxDone(t),t.statusCode==DWZ.statusCode.ok&&(t.navTabId?navTab.reloadFlag(t.navTabId):navTabPageBreak({},t.rel),"closeCurrent"==t.callbackType?setTimeout(function(){navTab.closeCurrentTab()},100):"forward"==t.callbackType&&navTab.reload(t.forwardUrl))}function dialogAjaxDone(t){if(DWZ.ajaxDone(t),t.statusCode==DWZ.statusCode.ok)t.navTabId?navTab.reload(t.forwardUrl,{navTabId:t.navTabId}):t.rel&&navTabPageBreak({},t.rel),$.pdialog.closeCurrent();else if(1==t.redalert){var e=jQuery.parseJSON(t.data),a=$.pdialog.getCurrent();e&&a.find("table tr").each(function(t){var a=$(this),i=a.attr("rel");$.each(e,function(t,e){i==e&&a.children("td").css({"border-top":"1px solid #F80C11","border-bottom-color":"#F80C11"})})})}}function dialogunclose(t){if(DWZ.ajaxDone(t),t.statusCode==DWZ.statusCode.ok){t.navTabId&&navTab.reload(t.forwardUrl,{navTabId:t.navTabId});var e=jQuery.parseJSON(t.data),a=$.pdialog.getCurrent();e&&a.find("table tr").each(function(t){var a=$(this),i=a.attr("rel");$.each(e,function(t,e){i==e&&a.remove()})})}else if(1==t.redalert){var e=jQuery.parseJSON(t.data),a=$.pdialog.getCurrent();e&&a.find("table tr").each(function(t){var a=$(this),i=a.attr("rel");$.each(e,function(t,e){i==e&&a.children("td").css({"border-top":"1px solid #F80C11","border-bottom-color":"#F80C11"})})})}}function navTabSearch(t,e){var a=$(t);return t[DWZ.pageInfo.pageNum]&&(t[DWZ.pageInfo.pageNum].value=1),navTab.reload(a.attr("action"),{data:a.serializeArray(),navTabId:e}),!1}function dialogSearch(t){var e=$(t);return t[DWZ.pageInfo.pageNum]&&(t[DWZ.pageInfo.pageNum].value=1),$.pdialog.reload(e.attr("action"),{data:e.serializeArray()}),!1}function dwzSearch(t,e){return"dialog"==e?dialogSearch(t):navTabSearch(t),!1}function divSearch(t,e){var a=$(t);if(t[DWZ.pageInfo.pageNum]&&(t[DWZ.pageInfo.pageNum].value=1),e){var i=$("#"+e);i.ajaxUrl({type:"POST",url:a.attr("action"),data:a.serializeArray(),callback:function(){i.find("[layoutH]").layoutH()}})}return!1}function _getPagerForm(t,e){var a=$("#pagerForm",t).get(0);return a&&(e.pageNum&&(a[DWZ.pageInfo.pageNum].value=e.pageNum),e.numPerPage&&(a[DWZ.pageInfo.numPerPage].value=e.numPerPage),e.orderField&&(a[DWZ.pageInfo.orderField].value=e.orderField),e.orderDirection&&a[DWZ.pageInfo.orderDirection]&&(a[DWZ.pageInfo.orderDirection].value=e.orderDirection)),a}function dwzPageBreak(t){var e=$.extend({targetType:"navTab",rel:"",data:{pageNum:"",numPerPage:"",orderField:"",orderDirection:""},callback:null},t),a="dialog"==e.targetType?$.pdialog.getCurrent():navTab.getCurrentPanel();if(e.rel){var i=a.find("#"+e.rel),n=_getPagerForm(i,e.data);n&&i.ajaxUrl({type:"POST",url:$(n).attr("action"),data:$(n).serializeArray(),callback:function(){i.find("[layoutH]").layoutH()}})}else{var n=_getPagerForm(a,e.data),r=$(n).serializeArray();"dialog"==e.targetType?n&&$.pdialog.reload($(n).attr("action"),{data:r,callback:e.callback}):n&&navTab.reload($(n).attr("action"),{data:r,callback:e.callback})}}function navTabPageBreak(t,e){dwzPageBreak({targetType:"navTab",rel:e,data:t})}function dialogPageBreak(t,e){dwzPageBreak({targetType:"dialog",rel:e,data:t})}function ajaxTodo(url,callback){var $callback=callback||navTabAjaxDone;$.isFunction($callback)||($callback=eval("("+callback+")")),$.ajax({type:"POST",url:url,dataType:"json",cache:!1,success:$callback,error:DWZ.ajaxError})}function uploadifyAllComplete(t,e){if(e.errors){var a="The total number of files uploaded: "+e.filesUploaded+"\nThe total number of errors while uploading: "+e.errors+"\nThe total number of bytes uploaded: "+e.allBytesLoaded+"\nThe average speed of all uploaded files: "+e.speed;alert("event:"+t+"\n"+a)}}function uploadifyComplete(t,e,a,i,n){DWZ.ajaxDone(DWZ.jsonEval(i))}function uploadifyError(t,e,a,i){alert("event:"+t+"\nqueueId:"+e+"\nfileObj.name:"+a.name+"\nerrorObj.type:"+i.type+"\nerrorObj.info:"+i.info)}var DWZ={keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},pageInfo:{pageNum:"pageNum",numPerPage:"numPerPage",orderField:"orderField",orderDirection:"orderDirection"},statusCode:{ok:200,error:300,timeout:301},ui:{sbar:!0},frag:{},_msg:{},_set:{loginUrl:"",loginTitle:"",debug:!1},msg:function(t,e){var a=function(t,e){e=e||[];for(var a=t,i=0;i<e.length;i++)a=a.replace(new RegExp("\\{"+i+"\\}","g"),e[i]);return a};return a(this._msg[t],e)},debug:function(t){this._set.debug&&alert(t)},loadLogin:function(){$.pdialog&&DWZ._set.loginTitle?$.pdialog.open(DWZ._set.loginUrl,"login",DWZ._set.loginTitle,{mask:!0,width:520,height:260}):window.location=DWZ._set.loginUrl},jsonEval:function(data){try{return"string"==$.type(data)?eval("("+data+")"):data}catch(e){return{}}},ajaxError:function(t,e,a){alertMsg?alertMsg.error("<div>Http status: "+t.status+" "+t.statusText+"</div><div>ajaxOptions: "+e+"</div><div>thrownError: "+a+"</div><div>"+t.responseText+"</div>"):alert("Http status: "+t.status+" "+t.statusText+"\najaxOptions: "+e+"\nthrownError:"+a+"\n"+t.responseText)},ajaxDone:function(t){return void 0===t.statusCode&&void 0===t.message?alertMsg?alertMsg.error(t):alert(t):void(t.statusCode==DWZ.statusCode.error?t.message&&alertMsg&&alertMsg.error(t.message):t.statusCode==DWZ.statusCode.timeout?alertMsg?alertMsg.error(t.message||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin}):DWZ.loadLogin():t.message&&alertMsg&&alertMsg.correct(t.message))},init:function(t,e){var a=$.extend({loginUrl:"login.html",loginTitle:null,callback:null,debug:!1,statusCode:{}},e);this._set.loginUrl=a.loginUrl,this._set.loginTitle=a.loginTitle,this._set.debug=a.debug,$.extend(DWZ.statusCode,a.statusCode),$.extend(DWZ.pageInfo,a.pageInfo),jQuery.ajax({type:"GET",url:t,dataType:"xml",timeout:5e4,cache:!1,error:function(e){alert("Error loading XML document: "+t+"\nHttp status: "+e.status+" "+e.statusText)},success:function(t){$(t).find("_PAGE_").each(function(){var t=$(this).attr("id");t&&(DWZ.frag[t]=$(this).text())}),$(t).find("_MSG_").each(function(){var t=$(this).attr("id");t&&(DWZ._msg[t]=$(this).text())}),jQuery.isFunction(a.callback)&&a.callback()}})}};!function(t){t.setRegional=function(e,a){t.regional||(t.regional={}),t.regional[e]=a},t.fn.extend({ajaxUrl:function(e){var a=t(this);t.fn.xheditor&&t("textarea.editor",a).xheditor(!1),t.ajax({type:e.type||"GET",url:e.url,data:e.data,cache:!1,success:function(i){var n=DWZ.jsonEval(i);DWZ.debug("statusCode:"+n.statusCode),n.statusCode==DWZ.statusCode.timeout&&alertMsg.error(n.message||DWZ.msg("sessionTimout"),{okCall:function(){t.pdialog&&t.pdialog.checkTimeout(),navTab&&navTab.checkTimeout(),DWZ.loadLogin()}}),n.statusCode==DWZ.statusCode.error?n.message&&alertMsg.error(n.message):(n.statusCode==DWZ.statusCode.timeout?a.html(n.message+'<div style="display:none;">'+i+"</div>").initUI():a.html(i).initUI(),t.isFunction(e.callback)&&e.callback(i))},error:DWZ.ajaxError})},loadUrl:function(e,a,i){t(this).ajaxUrl({url:e,data:a,callback:i})},initUI:function(){return this.each(function(){t.isFunction(initUI)&&initUI(this)})},layoutH:function(e){return this.each(function(){var a=t(this);e||(e=a.parents("div.layoutBox:first"));var i=e.height(),n=parseInt(a.attr("layoutH")),r=i-n>50?i-n:50;a.isTag("table")?a.removeAttr("layoutH").wrap('<div layoutH="'+n+'" style="overflow:auto;height:'+r+'px"></div>'):a.height(r).css("overflow","auto")})},hoverClass:function(e){var a=e||"hover";return this.each(function(){t(this).hover(function(){t(this).addClass(a)},function(){t(this).removeClass(a)})})},focusClass:function(e){var a=e||"textInputFocus";return this.each(function(){t(this).focus(function(){t(this).addClass(a)}).blur(function(){t(this).removeClass(a)})})},inputAlert:function(){return this.each(function(){function e(){return i.parent().find("label.alt")}function a(t){var e=i.position();return{width:i.width(),top:e.top+"px",left:e.left+"px",opacity:t||1}}var i=t(this);if(e().size()<1){i.attr("id")||i.attr("id",i.attr("name")+"_"+Math.round(1e4*Math.random()));var n=t('<label class="alt" for="'+i.attr("id")+'">'+i.attr("alt")+"</label>").appendTo(i.parent());n.css(a(1)),i.val()&&n.hide()}i.focus(function(){e().css(a(.3))}).blur(function(){t(this).val()||e().show().css("opacity",1)}).keydown(function(){e().hide()})})},isTag:function(e){return e&&t(this)[0].tagName.toLowerCase()==e?!0:!1},isbind:function(e){var a=t(this).data("events");return a&&a.refChange}}),t.extend(String.prototype,{isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(t,e){return new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return e>=0&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\[[0-9]+\]/,"["+t+"]").replace("#index#",t)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},replaceAll:function(t,e){return this.replace(new RegExp(t,"gm"),e)},replaceTm:function(t){return t?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(e){return t[e.replace(/[{}]+/g,"")]}):this},replaceTmById:function(e){var a=e||t(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(t){var e=a.find("#"+t.replace(/[{}]+/g,""));return e.val()?e.val():t})},isFinishedTm:function(){return!new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}").test(this)},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:""},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){for(var t=0;t<this.length;t+=1){var e=this.charAt(t);if(" "!=e&&"\n"!=e&&"	"!=e&&"\r"!=e)return!1}return!0},isPhone:function(){return new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&-1==this.indexOf("://"+document.domain)}})}(jQuery),function(){function t(t){return(0>t||t>9?"":"0")+t}function e(e,a){a+="";var i,n="",o=0,l="",c="",d=e.getYear()+"",u=e.getMonth()+1,h=e.getDate(),f=e.getDay(),i=e.getHours(),p=e.getMinutes(),g=e.getSeconds(),v={};for(d.length<4&&(d=""+(d-0+1900)),v.y=""+d,v.yyyy=d,v.yy=d.substring(2,4),v.M=u,v.MM=t(u),v.MMM=r[u-1],v.NNN=r[u+11],v.d=h,v.dd=t(h),v.E=s[f+7],v.EE=s[f],v.H=i,v.HH=t(i),0==i?v.h=12:i>12?v.h=i-12:v.h=i,v.hh=t(v.h),i>11?v.K=i-12:v.K=i,v.k=i+1,v.KK=t(v.K),v.kk=t(v.k),i>11?v.a="PM":v.a="AM",v.m=p,v.mm=t(p),v.s=g,v.ss=t(g);o<a.length;){for(l=a.charAt(o),c="";a.charAt(o)==l&&o<a.length;)c+=a.charAt(o++);n+=null!=v[c]?v[c]:c}return n}function a(t){return new RegExp(/^\d+$/).test(t)}function i(t,e,i,n){for(var r=n;r>=i;r--){var s=t.substring(e,e+r);if(s.length<i)return null;if(a(s))return s}return null}function n(t,e){t+="",e+="";for(var a,n,o=0,l=0,c="",d="",u=new Date,h=u.getYear(),f=u.getMonth()+1,p=1,g=u.getHours(),v=u.getMinutes(),m=u.getSeconds(),b="";l<e.length;){for(c=e.charAt(l),d="";e.charAt(l)==c&&l<e.length;)d+=e.charAt(l++);if("yyyy"==d||"yy"==d||"y"==d){if("yyyy"==d&&(a=4,n=4),"yy"==d&&(a=2,n=2),"y"==d&&(a=2,n=4),h=i(t,o,a,n),null==h)return 0;o+=h.length,2==h.length&&(h=h>70?1900+(h-0):2e3+(h-0))}else if("MMM"==d||"NNN"==d){f=0;for(var x=0;x<r.length;x++){var k=r[x];if(t.substring(o,o+k.length).toLowerCase()==k.toLowerCase()&&("MMM"==d||"NNN"==d&&x>11)){f=x+1,f>12&&(f-=12),o+=k.length;break}}if(1>f||f>12)return 0}else if("EE"==d||"E"==d)for(var x=0;x<s.length;x++){var y=s[x];if(t.substring(o,o+y.length).toLowerCase()==y.toLowerCase()){o+=y.length;break}}else if("MM"==d||"M"==d){if(f=i(t,o,d.length,2),null==f||1>f||f>12)return 0;o+=f.length}else if("dd"==d||"d"==d){if(p=i(t,o,d.length,2),null==p||1>p||p>31)return 0;o+=p.length}else if("hh"==d||"h"==d){if(g=i(t,o,d.length,2),null==g||1>g||g>12)return 0;o+=g.length}else if("HH"==d||"H"==d){if(g=i(t,o,d.length,2),null==g||0>g||g>23)return 0;o+=g.length}else if("KK"==d||"K"==d){if(g=i(t,o,d.length,2),null==g||0>g||g>11)return 0;o+=g.length}else if("kk"==d||"k"==d){if(g=i(t,o,d.length,2),null==g||1>g||g>24)return 0;o+=g.length,g--}else if("mm"==d||"m"==d){if(v=i(t,o,d.length,2),null==v||0>v||v>59)return 0;o+=v.length}else if("ss"==d||"s"==d){if(m=i(t,o,d.length,2),null==m||0>m||m>59)return 0;o+=m.length}else if("a"==d){if("am"==t.substring(o,o+2).toLowerCase())b="AM";else{if("pm"!=t.substring(o,o+2).toLowerCase())return 0;b="PM"}o+=2}else{if(t.substring(o,o+d.length)!=d)return 0;o+=d.length}}if(o!=t.length)return 0;if(2==f)if(h%4==0&&h%100!=0||h%400==0){if(p>29)return 0}else if(p>28)return 0;return(4==f||6==f||9==f||11==f)&&p>30?0:(12>g&&"PM"==b?g=g-0+12:g>11&&"AM"==b&&(g-=12),new Date(h,f-1,p,g,v,m))}var r=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),s=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");Date.prototype.formatDate=function(t){return e(this,t)},String.prototype.parseDate=function(t){return n(this,t)}}(),function(t){t.validator&&(t.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},"Letters, numbers or underscores only please"),t.validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},"Letters only please"),t.validator.addMethod("phone",function(t,e){return this.optional(e)||/^[0-9 \(\)]{7,30}$/.test(t)},"Please specify a valid phone number"),t.validator.addMethod("postcode",function(t,e){return this.optional(e)||/^[0-9 A-Za-z]{5,20}$/.test(t)},"Please specify a valid postcode"),t.validator.addMethod("date",function(e,a){if(e=e.replace(/\s+/g,""),String.prototype.parseDate){var i=t(a),n=i.attr("format")||"yyyy-MM-dd";return!i.val()||i.val().parseDate(n)}return this.optional(a)||e.match(/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/)},"Please enter a valid date."),t.validator.addClassRules({date:{date:!0},alphanumeric:{alphanumeric:!0},lettersonly:{lettersonly:!0},phone:{phone:!0},postcode:{postcode:!0}}),t.validator.setDefaults({errorElement:"span"}),t.validator.autoCreateRanges=!0)}(jQuery),function(t){t.fn.cssv=function(e){var a=t(this).css(e);return 1*a.substring(0,a.indexOf("px"))},t.fn.jBar=function(e){var a=t.extend({container:"#container",collapse:".collapse",toggleBut:".toggleCollapse div",sideBar:"#sidebar",sideBar2:"#sidebar_s",splitBar:"#splitBar",splitBar2:"#splitBarProxy"},e);return this.each(function(){var i=this,n=t(a.sideBar2,i),r=t(a.sideBar,i);t(a.toggleBut,r).click(function(){DWZ.ui.sbar=!1,t(a.splitBar).hide();var e=n.cssv("left")+n.outerWidth(),i=e-r.outerWidth(),s=t(a.container).cssv("left")-(r.outerWidth()-n.outerWidth()),o=r.outerWidth()-n.outerWidth()+t(a.container).outerWidth();t(a.container).animate({left:s,width:o},50,function(){r.animate({left:i},500,function(){r.hide(),n.show().css("left",-50).animate({left:5},200),t(window).trigger("resizeGrid")})})}),t(a.toggleBut,n).click(function(){return DWZ.ui.sbar=!0,n.animate({left:-25},200,function(){r.show()}),r.animate({left:5},800,function(){t(a.splitBar).show(),t(a.toggleBut,r).show();var e=5+r.outerWidth()+t(a.splitBar).outerWidth(),i=t(a.container).outerWidth()-(e-t(a.container).cssv("left"));t(a.container).css({left:e,width:i}),t(a.collapse,n).unbind("click"),t(window).trigger("resizeGrid")}),!1}),t(a.splitBar).mousedown(function(i){t(a.splitBar2).each(function(){var n=t(this);return setTimeout(function(){n.show()},100),n.css({visibility:"visible",left:t(a.splitBar).css("left")}),n.jDrag(t.extend(e,{obj:t("#sidebar"),move:"horizontal",event:i,stop:function(){t(this).css("visibility","hidden");var e=t(this).cssv("left")-t(a.splitBar).cssv("left"),i=r.outerWidth()+e,n=t(a.container).cssv("left")+e,s=t(a.container).outerWidth()-e;r.css("width",i),t(a.splitBar).css("left",t(this).css("left")),t(a.container).css({left:n,width:s})}})),!1})})})}}(jQuery),function(t){t.fn.jDrag=function(e){return"string"==typeof e&&"destroy"==e?this.each(function(){t(this).unbind("mousedown",t.rwdrag.start),t.data(this,"pp-rwdrag",null)}):this.each(function(){var a=t(this);if(t.data(t.rwdrag,"pp-rwdrag",{options:t.extend({el:a,obj:a},e)}),e.event)t.rwdrag.start(e.event);else{var i=e.selector;t(i,obj).bind("mousedown",t.rwdrag.start)}})},t.rwdrag={start:function(e){var a=t.data(this,"pp-rwdrag"),i=a.options.el[0];t.data(i,"pp-rwdrag",{options:a.options}),t.rwdrag.current||(t.rwdrag.current={el:i,oleft:parseInt(i.style.left)||0,otop:parseInt(i.style.top)||0,ox:e.pageX||e.screenX,oy:e.pageY||e.screenY},t(document).bind("mouseup",t.rwdrag.stop),t(document).bind("mousemove",t.rwdrag.drag))},drag:function(e){if(!e)var e=window.event;var a=t.rwdrag.current,i=t.data(a.el,"pp-rwdrag"),n=a.oleft+(e.pageX||e.clientX)-a.ox,r=a.otop+(e.pageY||e.clientY)-a.oy;if(1>r&&(r=0),"horizontal"==i.options.move)i.options.minW&&n>=t(i.options.obj).cssv("left")+i.options.minW&&i.options.maxW&&n<=t(i.options.obj).cssv("left")+i.options.maxW?a.el.style.left=n+"px":i.options.scop&&(i.options.relObj?n-parseInt(i.options.relObj.style.left)>i.options.cellMinW&&(a.el.style.left=n+"px"):a.el.style.left=n+"px");else if("vertical"==i.options.move)a.el.style.top=r+"px";else{var s=t(i.options.selector,t(i.options.obj));n>=2*-s.outerWidth()/3&&r>=0&&n+s.outerWidth()/3<t(window).width()&&r+s.outerHeight()<t(window).height()&&(a.el.style.left=n+"px",a.el.style.top=r+"px")}return t.rwdrag.preventEvent(e)},stop:function(e){var a=t.rwdrag.current,i=t.data(a.el,"pp-rwdrag");return t(document).unbind("mousemove",t.rwdrag.drag),t(document).unbind("mouseup",t.rwdrag.stop),i.options.stop&&i.options.stop.apply(a.el,[a.el]),t.rwdrag.current=null,t.rwdrag.preventEvent(e)},preventEvent:function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}}}(jQuery),function($){$.extend($.fn,{jTree:function(options){var op=$.extend({checkFn:null,selected:"selected",exp:"expandable",coll:"collapsable",firstExp:"first_expandable",firstColl:"first_collapsable",lastExp:"last_expandable",lastColl:"last_collapsable",folderExp:"folder_expandable",folderColl:"folder_collapsable",endExp:"end_expandable",endColl:"end_collapsable",file:"file",ck:"checked",unck:"unchecked"},options);return this.each(function(){var $this=$(this),cnum=$this.children().length;$(">li",$this).each(function(){var t=$(this),e=t.prev()[0]?!1:!0,a=t.next()[0]?!1:!0;t.genTree({icon:$this.hasClass("treeFolder"),ckbox:$this.hasClass("treeCheck"),options:op,level:0,exp:cnum>1?e?op.firstExp:a?op.lastExp:op.exp:op.endExp,coll:cnum>1?e?op.firstColl:a?op.lastColl:op.coll:op.endColl,showSub:!$this.hasClass("collapse")&&($this.hasClass("expand")||(cnum>1?e?!0:!1:!0)),isLast:cnum>1?a?!0:!1:!0})}),setTimeout(function(){if($this.hasClass("treeCheck")){var checkFn=eval($this.attr("oncheck"));checkFn&&$.isFunction(checkFn)&&$("div.ckbox",$this).each(function(){var t=$(this);t.click(function(){var e=$(t).hasClass("checked"),a=[];if(e){var i=$(t).parent().parent(),n=$("input",i);n.size()>1?$(n).each(function(){a[a.length]={name:$(this).attr("name"),value:$(this).val(),text:$(this).attr("text")}}):a={name:n.attr("name"),value:n.val(),text:n.attr("text")}}checkFn({checked:e,items:a})})})}$("a",$this).click(function(t){$("div."+op.selected,$this).removeClass(op.selected);var e=$(this).parent().addClass(op.selected);return $(".ckbox",e).trigger("click"),t.stopPropagation(),$(document).trigger("click"),$(this).attr("target")?void 0:!1})},1)})},subTree:function(t,e){return this.each(function(){$(">li",this).each(function(){var a=$(this);setTimeout(function(){var i=a.next()[0]?!1:!0;a.genTree({icon:t.icon,ckbox:t.ckbox,exp:i?t.options.lastExp:t.options.exp,coll:i?t.options.lastColl:t.options.coll,options:t.options,level:e,space:i?null:t.space,showSub:t.showSub,isLast:i})},1)})})},genTree:function(t){function e(t,e){if(t>0){var a=e.parent().parent(),i=a.next()[0]?"line":"indent",n="<div class='"+i+"'></div>";if(t>1){for(var r=$(">div>div",a).filter(":first"),s="";t>1;)s=s+"<div class='"+r.attr("class")+"'></div>",r=r.next(),t--;n=s+n}$(">div",e).prepend(n)}}var a=$.extend({icon:t.icon,ckbox:t.ckbox,exp:"",coll:"",showSub:!1,level:0,options:null,isLast:!1},t);return this.each(function(){var t=$(this),i=$(">ul",t),n=t.parent().prev(),r="unchecked";a.ckbox&&$(">.checked",n).size()>0&&(r="checked"),i.size()>0?(t.children(":first").wrap("<div></div>"),$(">div",t).prepend("<div class='"+(a.showSub?a.coll:a.exp)+"'></div>"+(a.ckbox?"<div class='ckbox "+r+"'></div>":"")+(a.icon?"<div class='"+(a.showSub?a.options.folderColl:a.options.folderExp)+"'></div>":"")),a.showSub?i.show():i.hide(),$(">div>div:first,>div>a",t).click(function(){var e=$(">li:first",i);e.children(":first").isTag("a")&&i.subTree(a,a.level+1);var n=$(this),r=n.isTag("a"),n=r?$(">div>div",t).eq(a.level):n;return(!r||i.is(":hidden"))&&(n.toggleClass(a.exp).toggleClass(a.coll),a.icon&&$(">div>div:last",t).toggleClass(a.options.folderExp).toggleClass(a.options.folderColl)),i.is(":hidden")?i.slideDown("fast"):r?"":i.slideUp("fast"),!1}),e(a.level,t),a.showSub&&i.subTree(a,a.level+1)):(t.children().wrap("<div></div>"),$(">div",t).prepend("<div class='node'></div>"+(a.ckbox?"<div class='ckbox "+r+"'></div>":"")+(a.icon?"<div class='file'></div>":"")),e(a.level,t),a.isLast&&$(t).addClass("last")),a.ckbox&&t._check(a),$(">div",t).mouseover(function(){$(this).addClass("hover")}).mouseout(function(){$(this).removeClass("hover")}),$.browser.msie&&$(">div",t).click(function(){return $("a",this).trigger("click"),!1})})},_check:function(op){var node=$(this),ckbox=$(">div>.ckbox",node),$input=node.find("a"),tname=$input.attr("tname"),tvalue=$input.attr("tvalue"),attrs="text='"+$input.text()+"' ";tname&&(attrs+="name='"+tname+"' "),tvalue&&(attrs+="value='"+tvalue+"' "),ckbox.append("<input type='checkbox' style='display:none;' "+attrs+"/>").click(function(){var t=ckbox.hasClass("checked"),e=t?"unchecked":"checked",a=t?"checked":"unchecked";return ckbox.removeClass(a).removeClass(t?"":"indeterminate").addClass(e),
$("input",ckbox).attr("checked",!t),$(">ul",node).find("li").each(function(){var i=$("div.ckbox",this);i.removeClass(a).removeClass(t?"":"indeterminate").addClass(e).find("input").attr("checked",!t)}),$(node)._checkParent(),!1});var cAttr=$input.attr("checked");cAttr&&(cAttr=eval(cAttr)),cAttr&&(ckbox.find("input").attr("checked",!0),ckbox.removeClass("unchecked").addClass("checked"),$(node)._checkParent())},_checkParent:function(){if(!$(this).parent().hasClass("tree")){var t=$(this).parent().parent(),e=$(">ul",t),a=e.find(">li>a").size()+e.find("div.ckbox").size(),i=e.find("div.checked").size(),n=i==a?"checked":0!=i?"indeterminate":"unchecked",r=i==a?"indeterminate":0!=i?"checked":"indeterminate";$(">div>.ckbox",t).removeClass("unchecked").removeClass("checked").removeClass(r).addClass(n),t._checkParent()}}})}(jQuery),function(t){function e(t,e){return function(){return t.apply(e,arguments)}}function a(e){if(t.data(this,"dwz-accordion")){var a=t.data(this,"dwz-accordion"),i=a.options;i.running=e?0:--i.running,i.running||(i.clearStyle&&i.toShow.add(i.toHide).css({height:"",overflow:""}),t(this).triggerHandler("change.dwz-accordion",[i.data],i.change))}}function i(e){var a=o.get(e);if(a){var i=t(a).parent(),n=i.height()-t(".accordionHeader",a).size()*t(".accordionHeader:first-child",a).outerHeight()-30,r=i.children().not(a);t.each(r,function(e){n-=t(r[e]).outerHeight()}),t(".accordionContent",a).height(n)}}function n(i,n,r,s,o){var l=t.data(this,"dwz-accordion").options;l.toShow=i,l.toHide=n,l.data=r;var c=e(a,this);l.running=0==n.size()?i.size():n.size(),l.animated?!l.alwaysOpen&&s?t.dwz.accordion.animations[l.animated]({toShow:jQuery([]),toHide:n,complete:c,down:o,autoheight:l.autoheight}):t.dwz.accordion.animations[l.animated]({toShow:i,toHide:n,complete:c,down:o,autoheight:l.autoheight}):(!l.alwaysOpen&&s?i.toggle():(n.hide(),i.show()),c(!0))}function r(e){var a=t.data(this,"dwz-accordion").options;if(a.disabled)return!1;if(!e.target&&!a.alwaysOpen){a.active.find("h2").toggleClass(a.selectedClass);var i=a.active.next(),r={instance:this,options:a,newHeader:jQuery([]),oldHeader:a.active,newContent:jQuery([]),oldContent:i},s=a.active=t([]);return n.call(this,s,i,r),!1}var o=t(e.target);if(o.parents(a.header).length)for(;!o.is(a.header);)o=o.parent();var l=o[0]==a.active[0];if(a.running||a.alwaysOpen&&l)return!1;if(o.is(a.header)){a.active.find("h2").toggleClass(a.selectedClass),l||o.find("h2").addClass(a.selectedClass);var s=o.next(),i=a.active.next(),r={instance:this,options:a,newHeader:o,oldHeader:a.active,newContent:s,oldContent:i},c=a.headers.index(a.active[0])>a.headers.index(o[0]);return a.active=l?t([]):o,n.call(this,s,i,r,l,c),!1}}function s(e,a){return void 0!=a?"number"==typeof a?e.filter(":eq("+a+")"):e.not(e.not(a)):a===!1?t([]):e.filter(":eq(0)")}var o=new Map;t.dwz=t.dwz||{},t(window).resize(function(){setTimeout(function(){for(var t=0;t<o.size();t++)i(o.element(t).key)},100)}),t.fn.extend({accordion:function(e,a){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){if(e.fillSpace&&o.put(e.fillSpace,this),"string"==typeof e){var a=t.data(this,"dwz-accordion");a[e].apply(a,i)}else t(this).is(".dwz-accordion")||t.data(this,"dwz-accordion",new t.dwz.accordion(this,e))})},activate:function(t){return this.accordion("activate",t)}}),t.dwz.accordion=function(e,a){if(this.options=a=t.extend({},t.dwz.accordion.defaults,a),this.element=e,t(e).addClass("dwz-accordion"),a.navigation){var n=t(e).find("a").filter(a.navigationFilter);n.length&&(n.filter(a.header).length?a.active=n:(a.active=n.parent().parent().prev(),n.addClass("current")))}if(a.headers=t(e).find(a.header),a.active=s(a.headers,a.active),a.fillSpace)i(a.fillSpace);else if(a.autoheight){var o=0;a.headers.next().each(function(){o=Math.max(o,t(this).outerHeight())}).height(o)}a.headers.not(a.active||"").next().hide(),a.active.find("h2").addClass(a.selectedClass),a.event&&t(e).bind(a.event+".dwz-accordion",r)},t.dwz.accordion.prototype={activate:function(t){r.call(this.element,{target:s(this.options.headers,t)[0]})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.options.headers.next().css("display",""),(this.options.fillSpace||this.options.autoheight)&&this.options.headers.next().css("height",""),t.removeData(this.element,"dwz-accordion"),t(this.element).removeClass("dwz-accordion").unbind(".dwz-accordion")}},t.extend(t.dwz.accordion,{defaults:{selectedClass:"collapsable",alwaysOpen:!0,animated:"slide",event:"click",header:".accordionHeader",autoheight:!0,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(e,a){if(e=t.extend({easing:"swing",duration:300},e,a),!e.toHide.size())return void e.toShow.animate({height:"show"},e);var i=e.toHide.height(),n=e.toShow.height(),r=n/i;e.toShow.css({height:0}).show(),e.toHide.filter(":hidden").each(e.complete).end().filter(":visible").animate({height:"hide"},{step:function(a){var n=(i-a)*r;(t.browser.msie||t.browser.opera)&&(n=Math.ceil(n)),e.toShow.height(n)},duration:e.duration,easing:e.easing,complete:function(){e.autoheight||e.toShow.css("height","auto"),e.complete()}})},bounceslide:function(t){this.slide(t,{easing:t.down?"bounceout":"swing",duration:t.down?1e3:200})},easeslide:function(t){this.slide(t,{easing:"easeinout",duration:700})}}})}(jQuery),function(t){t.fn.extend({theme:function(e){var a=t.extend({themeBase:"themes"},e),i=a.themeBase+"/#theme#/style.css";return this.each(function(){var e=t(this).find(">li[theme]"),a=function(a){t("head").find("link[href$='style.css']").attr("href",i.replace("#theme#",a)),e.find(">div").removeClass("selected"),e.filter("[theme="+a+"]").find(">div").addClass("selected"),t.isFunction(t.cookie)&&t.cookie("dwz_theme",a)};if(e.each(function(e){var i=t(this),n=i.attr("theme");i.addClass(n).click(function(){a(n)})}),t.isFunction(t.cookie)){var n=t.cookie("dwz_theme");n&&a(n)}})}})}(jQuery),function(t){function e(e){e.addClass("selected"),t(document).bind("click",{box:e},i)}function a(e){e.removeClass("selected"),t(document).unbind("click",i)}function i(t){a(t.data.box)}t.fn.navMenu=function(){return this.each(function(){var e=t(this);e.find("li>a").click(function(){var a=t(this);return t.post(a.attr("href"),{},function(i){var n=DWZ.jsonEval(i);n.statusCode==DWZ.statusCode.timeout?alertMsg.error(n.message||DWZ.msg("sessionTimout"),{okCall:function(){DWZ.loadLogin()}}):t("#sidebar").find(".accordion").remove().end().append(i).initUI(),e.find("li").removeClass("selected"),a.parent().addClass("selected")}),!1})})},t.fn.switchEnv=function(){var i={cities$:">ul>li",boxTitle$:">a>span"};return this.each(function(){var n=t(this);n.click(function(){return n.hasClass("selected")?a(n):e(n),!1}),n.find(i.cities$).click(function(){var e=t(this);return t.post(e.find(">a").attr("href"),{},function(r){a(n),n.find(i.boxTitle$).html(e.find(">a").html()),navTab.closeAllTab(),t("#sidebar").find(".accordion").remove().end().append(r).initUI()}),!1})})}}(jQuery),$.setRegional("alertMsg",{title:{error:"Error",info:"Information",warn:"Warning",correct:"Successful",confirm:"Confirmation"},butMsg:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"}});var alertMsg={_boxId:"#alertMsgBox",_bgId:"#alertBackground",_closeTimer:null,_types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},_getTitle:function(t){return $.regional.alertMsg.title[t]},_open:function(t,e,a){$(this._boxId).remove();var i="";if(a)for(var n=0;n<a.length;n++){var r=a[n].call?"callback":"";i+=DWZ.frag.alertButFrag.replace("#butMsg#",a[n].name).replace("#callback#",r)}var s=DWZ.frag.alertBoxFrag.replace("#type#",t).replace("#title#",this._getTitle(t)).replace("#message#",e).replace("#butFragment#",i);$(s).appendTo("body").css({top:-$(this._boxId).height()+"px"}).animate({top:"0px"},500),this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),this._types.info==t||this._types.correct==t?this._closeTimer=setTimeout(function(){alertMsg.close()},3500):$(this._bgId).show();for(var o=$(this._boxId).find("[rel=callback]"),n=0;n<a.length;n++)a[n].call&&o.eq(n).click(a[n].call)},close:function(){$(this._boxId).animate({top:-$(this._boxId).height()},500,function(){$(this).remove()}),$(this._bgId).hide()},error:function(t,e){this._alert(this._types.error,t,e)},info:function(t,e){this._alert(this._types.info,t,e)},warn:function(t,e){this._alert(this._types.warn,t,e)},correct:function(t,e){this._alert(this._types.correct,t,e)},_alert:function(t,e,a){var i={okName:$.regional.alertMsg.butMsg.ok,okCall:null};$.extend(i,a);var n=[{name:i.okName,call:i.okCall}];this._open(t,e,n)},confirm:function(t,e){var a={okName:$.regional.alertMsg.butMsg.ok,okCall:null,cancelName:$.regional.alertMsg.butMsg.cancel,cancelCall:null};$.extend(a,e);var i=[{name:a.okName,call:a.okCall},{name:a.cancelName,call:a.cancelCall}];this._open(this._types.confirm,t,i)}};!function(t){function e(e,s,o,l){var c=r[e],d=t(DWZ.frag[c.id]);d.find("li").hoverClass(),i.html(d),t.each(c.bindings,function(e,n){t("[rel='"+e+"']",i).bind("click",function(e){a(),n(t(s),t("#"+c.id))})});var u=o.pageX,h=o.pageY;t(window).width()<u+i.width()&&(u-=i.width()),t(window).height()<h+i.height()&&(h-=i.height()),i.css({left:u,top:h}).show(),c.shadow&&n.css({width:i.width(),height:i.height(),left:u+3,top:h+3}).show(),t(document).one("click",a),t.isFunction(c.ctrSub)&&c.ctrSub(t(s),t("#"+c.id))}function a(){i.hide(),n.hide()}var i,n,r;t.fn.extend({contextMenu:function(a,s){var o=t.extend({shadow:!0,bindings:{},ctrSub:null},s);i||(i=t('<div id="contextmenu"></div>').appendTo("body").hide()),n||(n=t('<div id="contextmenuShadow"></div>').appendTo("body").hide()),r=r||[],r.push({id:a,shadow:o.shadow,bindings:o.bindings||{},ctrSub:o.ctrSub});var l=r.length-1;return t(this).bind("contextmenu",function(t){return e(l,this,t,o),!1}),this}}),t("#Design").bind("contextmenu",function(t){alert(111)})}(jQuery);var navTab={componentBox:null,_tabBox:null,_prevBut:null,_nextBut:null,_panelBox:null,_moreBut:null,_moreBox:null,_currentIndex:0,_op:{id:"navTab",stTabBox:".navTab-tab",stPanelBox:".navTab-panel",mainTabId:"main",close$:"a.close",prevClass:"tabsLeft",nextClass:"tabsRight",stMore:".tabsMore",stMoreLi:"ul.tabsMoreList"},init:function(t){$.History&&$.History.init("#container");var e=this;$.extend(this._op,t),this.componentBox=$("#"+this._op.id),this._tabBox=this.componentBox.find(this._op.stTabBox),this._panelBox=this.componentBox.find(this._op.stPanelBox),this._prevBut=this.componentBox.find("."+this._op.prevClass),this._nextBut=this.componentBox.find("."+this._op.nextClass),this._moreBut=this.componentBox.find(this._op.stMore),this._moreBox=this.componentBox.find(this._op.stMoreLi),this._prevBut.click(function(t){e._scrollPrev()}),this._nextBut.click(function(t){e._scrollNext()}),this._moreBut.click(function(){return e._moreBox.show(),!1}),$(document).click(function(){e._moreBox.hide()}),this._contextmenu(this._tabBox),this._contextmenu(this._getTabs()),this._init(),this._ctrlScrollBut()},_init:function(){var t=this;this._getTabs().each(function(e){$(this).unbind("click").click(function(a){t._switchTab(e)}),$(this).find(navTab._op.close$).unbind("click").click(function(){t._closeTab(e)})}),this._getMoreLi().each(function(e){$(this).find(">a").unbind("click").click(function(a){t._switchTab(e)})}),this._switchTab(this._currentIndex)},_contextmenu:function(t){var e=this;t.contextMenu("navTabCM",{bindings:{reload:function(t,a){e._reload(t,!0)},AddOften:function(t,a){e._addoften(t,!0)},closeCurrent:function(t,a){var i=t.attr("tabid");i?e.closeTab(i):e.closeCurrentTab()},closeOther:function(t,a){var i=e._indexTabId(t.attr("tabid"));e._closeOtherTab(i>0?i:e._currentIndex)},closeAll:function(t,a){e.closeAllTab()}},ctrSub:function(t,a){var i=a.find("[rel='reload']"),n=a.find("[rel='closeCurrent']"),r=a.find("[rel='closeOther']"),s=a.find("[rel='closeAll']"),o=e._getTabs();o.size()<2&&(n.addClass("disabled"),r.addClass("disabled"),s.addClass("disabled")),0==e._currentIndex||t.attr("tabid")==e._op.mainTabId?(n.addClass("disabled"),i.addClass("disabled")):2==o.size()&&r.addClass("disabled")}})},_getTabs:function(){return this._tabBox.find("> li")},_getPanels:function(){return this._panelBox.find("> div")},_getMoreLi:function(){return this._moreBox.find("> li")},_getTab:function(t){var e=this._indexTabId(t);return e>=0?this._getTabs().eq(e):void 0},_getPanel:function(t){var e=this._indexTabId(t);return e>=0?this._getPanels().eq(e):void 0},_getTabsW:function(t,e){return this._tabsW(this._getTabs().slice(t,e))},_tabsW:function(t){var e=0;return t.each(function(){e+=$(this).outerWidth(!0)}),e},_indexTabId:function(t){if(!t)return-1;var e=-1;return this._getTabs().each(function(a){return $(this).attr("tabid")==t?void(e=a):void 0}),e},_getLeft:function(){return this._tabBox.position().left},_getScrollBarW:function(){return this.componentBox.width()-55},_visibleStart:function(){for(var t=this._getLeft(),e=0,a=this._getTabs(),i=0;i<a.size();i++){if(e+t>=0)return i;e+=a.eq(i).outerWidth(!0)}return 0},_visibleEnd:function(){for(var t=this._getLeft(),e=0,a=this._getTabs(),i=0;i<a.size();i++)if(e+=a.eq(i).outerWidth(!0),e+t>this._getScrollBarW())return i;return a.size()},_scrollPrev:function(){var t=this._visibleStart();t>0&&this._scrollTab(-this._getTabsW(0,t-1))},_scrollNext:function(){var t=this._visibleEnd();t<this._getTabs().size()&&this._scrollTab(-this._getTabsW(0,t+1)+this._getScrollBarW())},_scrollTab:function(t,e){var a=this;this._tabBox.animate({left:t+"px"},200,function(){a._ctrlScrollBut()})},_scrollCurrent:function(){var t=this._tabsW(this._getTabs());t<=this._getScrollBarW()?this._scrollTab(0):this._getLeft()<this._getScrollBarW()-t?this._scrollTab(this._getScrollBarW()-t):this._currentIndex<this._visibleStart()?this._scrollTab(-this._getTabsW(0,this._currentIndex)):this._currentIndex>=this._visibleEnd()&&this._scrollTab(this._getScrollBarW()-this._getTabs().eq(this._currentIndex).outerWidth(!0)-this._getTabsW(0,this._currentIndex))},_ctrlScrollBut:function(){var t=this._tabsW(this._getTabs());this._getScrollBarW()>t?(this._prevBut.hide(),this._nextBut.hide(),this._tabBox.parent().removeClass("tabsPageHeaderMargin")):(this._prevBut.show().removeClass("tabsLeftDisabled"),this._nextBut.show().removeClass("tabsRightDisabled"),this._tabBox.parent().addClass("tabsPageHeaderMargin"),this._getLeft()>=0?this._prevBut.addClass("tabsLeftDisabled"):this._getLeft()<=this._getScrollBarW()-t&&this._nextBut.addClass("tabsRightDisabled"))},_switchTab:function(t){var e=this._getTabs().removeClass("selected").eq(t).addClass("selected");this._getPanels().hide().eq(t).show(),this._getMoreLi().removeClass("selected").eq(t).addClass("selected"),this._currentIndex=t,this._scrollCurrent(),this._reload(e)},_closeTab:function(t){this._getTabs().eq(t).remove(),this._getPanels().eq(t).remove(),this._getMoreLi().eq(t).remove(),this._currentIndex>=t&&this._currentIndex--,this._init(),this._scrollCurrent(),this._reload(this._getTabs().eq(this._currentIndex))},closeTab:function(t){var e=this._indexTabId(t);e>0&&this._closeTab(e)},closeCurrentTab:function(){this._currentIndex>0&&this._closeTab(this._currentIndex)},closeAllTab:function(){this._getTabs().filter(":gt(0)").remove(),this._getPanels().filter(":gt(0)").remove(),this._getMoreLi().filter(":gt(0)").remove(),this._currentIndex=0,this._init(),this._scrollCurrent()},_closeOtherTab:function(t){if(t=t||this._currentIndex,t>0){var e=":eq("+t+")";this._getTabs().not(e).filter(":gt(0)").remove(),this._getPanels().not(e).filter(":gt(0)").remove(),this._getMoreLi().not(e).filter(":gt(0)").remove(),this._currentIndex=1,this._init(),this._scrollCurrent()}else this.closeAllTab()},_loadUrlCallback:function(t){"function"==typeof sonPageInit&&sonPageInit(),t.find("[layoutH]").layoutH(),t.find(":button.close").click(function(){navTab.closeCurrentTab()})},_reload:function(t,e){e=e||t.data("reloadFlag");var a=t.attr("url");if(e&&a){t.data("reloadFlag",null);var i=this._getPanel(t.attr("tabid"));a+="/ntdata/0",t.hasClass("external")?navTab.openExternal(a,i):i.loadUrl(a,{},function(){navTab._loadUrlCallback(i)})}},_addoften:function(t,e){var a=t.attr("url"),i=t.find("span").html(),n=document.URL,r=0;r=n.indexOf("index.php"),n=n.substr(0,r+10),$.ajax({type:"POST",url:n+"UserOftenMenu/insert",data:{name:i,url:n+a},dataType:"json",cache:!1,success:DWZ.ajaxDone,error:DWZ.ajaxError})},reloadFlag:function(t){var e=this._getTab(t);e&&(this._indexTabId(t)==this._currentIndex?this._reload(e,!0):e.data("reloadFlag",1))},reload:function(t,e){var a=$.extend({data:{},navTabId:"",callback:null},e),i=a.navTabId?this._getTab(a.navTabId):this._getTabs().eq(this._currentIndex),n=a.navTabId?this._getPanel(a.navTabId):this._getPanels().eq(this._currentIndex);n&&(t||(t=i.attr("url")),t&&(i.hasClass("external")?navTab.openExternal(t,n):n.ajaxUrl({type:"POST",url:t,data:a.data,callback:function(t){navTab._loadUrlCallback(n),$.isFunction(a.callback)&&a.callback(t)}})))},getCurrentPanel:function(){return this._getPanels().eq(this._currentIndex)},checkTimeout:function(){var t=DWZ.jsonEval(this.getCurrentPanel().children("div").html());t&&t.statusCode==DWZ.statusCode.timeout&&this.closeCurrentTab()},openExternal:function(t,e){var a=navTab._panelBox.height();e.html(DWZ.frag.externalFrag.replaceAll("{url}",t).replaceAll("{height}",a+"px"))},openTab:function(t,e,a){var i=$.extend({title:"New Tab",data:{},fresh:!0,external:!1},a),n=this._indexTabId(t);if(n>=0){var r=this._getTabs().eq(n),s=r.attr("tabid")==this._op.mainTabId?"> span > span":"> span";r.find(">a").attr("title",i.title).find(s).text(i.title);var o=this._getPanels().eq(n);(i.fresh||r.attr("url")!=e)&&(r.attr("url",e),i.external||e.isExternalUrl()?(r.addClass("external"),navTab.openExternal(e,o)):(r.removeClass("external"),o.ajaxUrl({type:"GET",url:e,data:i.data,callback:function(){navTab._loadUrlCallback(o)}}))),this._currentIndex=n}else{var l='<li tabid="#tabid#"><a href="javascript:" title="#title#"><span>#title#</span></a><a href="javascript:;" class="close">close</a></li>';this._tabBox.append(l.replace("#tabid#",t).replaceAll("#title#",i.title)),this._panelBox.append('<div class="page unitBox"></div>'),this._moreBox.append('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",i.title));var c=this._getTabs(),r=c.filter(":last"),o=this._getPanels().filter(":last");i.external||e.isExternalUrl()?(r.addClass("external"),navTab.openExternal(e,o)):(r.removeClass("external"),o.ajaxUrl({type:"GET",url:e,data:i.data,callback:function(){navTab._loadUrlCallback(o)}})),$.History&&setTimeout(function(){$.History.addHistory(t,function(t){var e=navTab._indexTabId(t);e>=0&&navTab._switchTab(e)},t)},10),this._currentIndex=c.size()-1,this._contextmenu(c.filter(":last").hoverClass("hover"))}this._init(),this._scrollCurrent(),this._getTabs().eq(this._currentIndex).attr("url",e)}};!function(t){t.fn.extend({tabs:function(e){function a(e){var r=e.add(t("> *",e)),s=t(n.stTabHeader,r),o=t(n.stTab+" li",s),l=t(n.stTabPanel+" > *",r);o.unbind().find("a").unbind(),s.find("."+n.prevClass).unbind(),s.find("."+n.nextClass).unbind(),o.each(function(r){n.currentIndex==r?t(this).addClass("selected"):t(this).removeClass("selected"),"hover"==n.eventType?t(this).hover(function(t){i(e,r)}):t(this).click(function(t){i(e,r)}),t("a",this).each(function(){t(this).hasClass(n.ajaxClass)?(t(this).click(function(t){var e=l.eq(r);this.href&&e.loadUrl(this.href,{},function(){e.find("[layoutH]").layoutH()}),t.preventDefault()}),n.currentIndex==r&&t(this).trigger("click")):t(this).hasClass(n.closeClass)&&t(this).click(function(t){return o.eq(r).remove(),l.eq(r).remove(),r==n.currentIndex?n.currentIndex=r+1<o.size()?r:r-1:r<n.currentIndex&&(n.currentIndex=r),a(e),!1})})}),i(e,n.currentIndex)}function i(e,a){var i=e.add(t("> *",e)),r=t(n.stTabHeader,i),s=t(n.stTab+" li",r),o=t(n.stTabPanel+" > *",i),l=s.eq(a),c=o.eq(a);n.reverse&&l.hasClass("selected")?(s.removeClass("selected"),o.hide()):(n.currentIndex=a,s.removeClass("selected"),l.addClass("selected"),o.hide().eq(n.currentIndex).show()),c.attr("inited")||c.attr("inited",1e3).find("input[type=text]").filter("[alt]").inputAlert()}var n=t.extend({reverse:!1,eventType:"click",currentIndex:0,stTabHeader:"> .tabsHeader",stTab:">.tabsHeaderContent>ul",stTabPanel:"> .tabsContent",ajaxClass:"j-ajax",closeClass:"close",prevClass:"tabsLeft",nextClass:"tabsRight"},e);return this.each(function(){a(t(this))})}})}(jQuery),function(t){t.fn.extend({jresize:function(e){return"string"==typeof e&&"destroy"==e?this.each(function(){var e=this;t("div[class^='resizable']",e).each(function(){t(this).hide()})}):this.each(function(){var e=t(this),a=t(".resizable");t("div[class^='resizable']",e).each(function(){var i=this;t(i).mousedown(function(n){return t.pdialog.switchDialog(e),t.resizeTool.start(a,e,n,t(i).attr("tar")),!1}).show()})})}}),t.resizeTool={start:function(e,a,i,n){t.pdialog.initResize(e,a,n),t.data(e[0],"layer-drag",{options:t.extend(t.pdialog._op,{target:n,dialog:a,stop:t.resizeTool.stop})}),t.layerdrag.start(e[0],i,t.pdialog._op)},stop:function(){var e=t.data(arguments[0],"layer-drag");t.pdialog.resizeDialog(arguments[0],e.options.dialog,e.options.target),t("body").css("cursor",""),t(arguments[0]).hide(),t(arguments[0]).nextAll(".resizable").hide()}},t.layerdrag={start:function(e,a,i){return t.layerdrag.current||(t.layerdrag.current={el:e,oleft:parseInt(e.style.left)||0,owidth:parseInt(e.style.width)||0,otop:parseInt(e.style.top)||0,oheight:parseInt(e.style.height)||0,ox:a.pageX||a.screenX,oy:a.pageY||a.clientY},t(document).bind("mouseup",t.layerdrag.stop),t(document).bind("mousemove",t.layerdrag.drag)),t.layerdrag.preventEvent(a)},drag:function(e){if(!e)var e=window.event;var a=t.layerdrag.current,i=t.data(a.el,"layer-drag"),n=(e.pageX||e.screenX)-a.ox,r=(e.pageY||e.clientY)-a.oy;if((e.pageY||e.clientY)<=0||(e.pageY||e.clientY)>=t(window).height()-t(".dialogHeader",t(i.options.dialog)).outerHeight())return!1;var s=i.options.target,o=a.owidth,l=a.oheight;return"n"!=s&&"s"!=s&&(o+=s.indexOf("w")>=0?-n:n),o>=t.pdialog._op.minW&&(s.indexOf("w")>=0&&(a.el.style.left=a.oleft+n+"px"),"n"!=s&&"s"!=s&&(a.el.style.width=o+"px")),"w"!=s&&"e"!=s&&(l+=s.indexOf("n")>=0?-r:r),l>=t.pdialog._op.minH&&(s.indexOf("n")>=0&&(a.el.style.top=a.otop+r+"px"),"w"!=s&&"e"!=s&&(a.el.style.height=l+"px")),t.layerdrag.preventEvent(e)},stop:function(e){var a=t.layerdrag.current,i=t.data(a.el,"layer-drag");return t(document).unbind("mousemove",t.layerdrag.drag),t(document).unbind("mouseup",t.layerdrag.stop),i.options.stop&&i.options.stop.apply(a.el,[a.el]),t.layerdrag.current=null,t.layerdrag.preventEvent(e)},preventEvent:function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}}}(jQuery),function(t){t.pdialog={_op:{height:300,width:580,minH:40,minW:50,total:20,max:!1,mask:!1,resizable:!0,drawable:!0,maxable:!0,minable:!0,fresh:!0},_current:null,_zIndex:42,getCurrent:function(){return this._current},reload:function(e,a){var i=t.extend({data:{},dialogId:"",callback:null},a),n=i.dialogId&&t("body").data(i.dialogId)||this._current;if(n){var r=n.find(".dialogContent");r.ajaxUrl({type:"POST",url:e,data:i.data,callback:function(e){r.find("[layoutH]").layoutH(r),t(".pageContent",n).width(t(n).width()-14),t(":button.close",n).click(function(){return t.pdialog.close(n),!1}),t.isFunction(i.callback)&&i.callback(e)}})}},open:function(e,a,i,n){var r=t.extend({},t.pdialog._op,n),s=t("body").data(a);if(s){if(s.is(":hidden")&&s.show(),r.fresh||e!=t(s).data("url")){s.data("url",e),s.find(".dialogHeader").find("h1").html(i),this.switchDialog(s);var o=s.find(".dialogContent");o.loadUrl(e,{},function(){o.find("[layoutH]").layoutH(o),t(".pageContent",s).width(t(s).width()-14),t("button.close").click(function(){return t.pdialog.close(s),!1})})}}else{t("body").append(DWZ.frag.dialogFrag),s=t(">.dialog:last-child","body"),s.data("id",a),s.data("url",e),n.close&&s.data("close",n.close),n.param&&s.data("param",n.param),t.fn.bgiframe&&s.bgiframe(),s.find(".dialogHeader").find("h1").html(i),t(s).css("zIndex",t.pdialog._zIndex+=2),t("div.shadow").css("zIndex",t.pdialog._zIndex-3).show(),t.pdialog._init(s,n),t(s).click(function(){t.pdialog.switchDialog(s)}),r.resizable&&s.jresize(),r.drawable&&s.dialogDrag(),t("a.close",s).click(function(e){return t.pdialog.close(s),!1}),r.maxable?t("a.maximize",s).show().click(function(e){return t.pdialog.switchDialog(s),t.pdialog.maxsize(s),s.jresize("destroy").dialogDrag("destroy"),!1}):t("a.maximize",s).hide(),t("a.restore",s).click(function(e){return t.pdialog.restore(s),s.jresize().dialogDrag(),!1}),r.minable?t("a.minimize",s).show().click(function(e){return t.pdialog.minimize(s),!1}):t("a.minimize",s).hide(),t("div.dialogHeader a",s).mousedown(function(){return!1}),t("div.dialogHeader",s).dblclick(function(){t("a.restore",s).is(":hidden")?t("a.maximize",s).trigger("click"):t("a.restore",s).trigger("click")}),r.max&&(t.pdialog.maxsize(s),s.jresize("destroy").dialogDrag("destroy")),t("body").data(a,s),t.pdialog._current=s,t.pdialog.attachShadow(s);var o=t(".dialogContent",s);o.loadUrl(e,{},function(){o.find("[layoutH]").layoutH(o),t(".pageContent",s).width(t(s).width()-14),t("button.close").click(function(){return t.pdialog.close(s),!1})})}r.mask?(t(s).css("zIndex",1e3),t("a.minimize",s).hide(),t(s).data("mask",!0),t("#dialogBackground").show()):r.minable&&t.taskBar.addDialog(a,i)},switchDialog:function(e){var a=t(e).css("zIndex");if(t.pdialog.attachShadow(e),t.pdialog._current){var i=t(t.pdialog._current).css("zIndex");t(t.pdialog._current).css("zIndex",a),t(e).css("zIndex",i),t("div.shadow").css("zIndex",i-1),t.pdialog._current=e}t.taskBar.switchTask(e.data("id"))},attachShadow:function(e){var a=t("div.shadow");a.is(":hidden")&&a.show(),a.css({top:parseInt(t(e)[0].style.top)-2,left:parseInt(t(e)[0].style.left)-4,height:parseInt(t(e).height())+8,width:parseInt(t(e).width())+8,zIndex:parseInt(t(e).css("zIndex"))-1}),t(".shadow_c",a).children().andSelf().each(function(){t(this).css("height",t(e).outerHeight()-4)})},_init:function(e,a){var i=t.extend({},this._op,a),n=i.height>i.minH?i.height:i.minH,r=i.width>i.minW?i.width:i.minW;(isNaN(e.height())||e.height()<n)&&(t(e).height(n+"px"),t(".dialogContent",e).height(n-t(".dialogHeader",e).outerHeight()-t(".dialogFooter",e).outerHeight()-6)),(isNaN(e.css("width"))||e.width()<r)&&t(e).width(r+"px");var s=(t(window).height()-e.height())/2;e.css({left:(t(window).width()-e.width())/2,top:s>0?s:0})},initResize:function(e,a,i){t("body").css("cursor",i+"-resize"),e.css({top:t(a).css("top"),left:t(a).css("left"),height:t(a).css("height"),width:t(a).css("width")}),e.show()},repaint:function(e,a){var i=t("div.shadow");"w"!=e&&"e"!=e&&(i.css("height",i.outerHeight()+a.tmove),t(".shadow_c",i).children().andSelf().each(function(){t(this).css("height",t(this).outerHeight()+a.tmove)})),("n"==e||"nw"==e||"ne"==e)&&i.css("top",a.otop-2),!a.owidth||"n"==e&&"s"==e||i.css("width",a.owidth+8),e.indexOf("w")>=0&&i.css("left",a.oleft-4)},resizeTool:function(e,a,i){t("div[class^='resizable']",i).filter(function(){return"w"==t(this).attr("tar")||"e"==t(this).attr("tar")}).each(function(){t(this).css("height",t(this).outerHeight()+a)})},resizeDialog:function(e,a,i){var n=parseInt(e.style.left),r=parseInt(e.style.top),s=parseInt(e.style.height),o=parseInt(e.style.width);if("n"==i||"nw"==i?tmove=parseInt(t(a).css("top"))-r:tmove=s-parseInt(t(a).css("height")),t(a).css({left:n,width:o,top:r,height:s}),t(".dialogContent",a).css("width",o-12+"px"),t(".pageContent",a).css("width",o-14+"px"),"w"!=i&&"e"!=i){var l=t(".dialogContent",a);l.css({height:s-t(".dialogHeader",a).outerHeight()-t(".dialogFooter",a).outerHeight()-6}),l.find("[layoutH]").layoutH(l),t.pdialog.resizeTool(i,tmove,a)}t.pdialog.repaint(i,{oleft:n,otop:r,tmove:tmove,owidth:o}),t(window).trigger("resizeGrid")},close:function(e){"string"==typeof e&&(e=t("body").data(e));var a=e.data("close"),i=!0;if(a&&t.isFunction(a)){var n=e.data("param");if(n&&""!=n?(n=DWZ.jsonEval(n),i=a(n)):i=a(),!i)return}t.fn.xheditor&&t("textarea.editor",e).xheditor(!1),t(e).unbind("click").hide(),t("div.dialogContent",e).html(""),t("div.shadow").hide(),t(e).data("mask")?t("#dialogBackground").hide():t.taskBar.closeDialog(t(e).data("id")),t("body").removeData(t(e).data("id")),t(e).remove()},closeCurrent:function(){this.close(t.pdialog._current)},checkTimeout:function(){var e=t(".dialogContent",t.pdialog._current),a=DWZ.jsonEval(e.children("div").html());a&&a.statusCode==DWZ.statusCode.timeout&&this.closeCurrent()},maxsize:function(e){t(e).data("original",{top:t(e).css("top"),left:t(e).css("left"),width:t(e).css("width"),height:t(e).css("height")}),t("a.maximize",e).hide(),t("a.restore",e).show();var a=t(window).width(),i=t(window).height()-34;t(e).css({top:"0px",left:"0px",width:a+"px",height:i+"px"}),t.pdialog._resizeContent(e,a,i)},restore:function(e){var a=t(e).data("original"),i=parseInt(a.width),n=parseInt(a.height);t(e).css({top:a.top,left:a.left,width:i,height:n}),t.pdialog._resizeContent(e,i,n),t("a.maximize",e).show(),t("a.restore",e).hide(),t.pdialog.attachShadow(e)},minimize:function(e){t(e).hide(),t("div.shadow").hide();var a=t.taskBar.getTask(t(e).data("id"));t(".resizable").css({top:t(e).css("top"),left:t(e).css("left"),height:t(e).css("height"),width:t(e).css("width")}).show().animate({top:t(window).height()-60,left:a.position().left,width:a.outerWidth(),height:a.outerHeight()},250,function(){t(this).hide(),t.taskBar.inactive(t(e).data("id"))})},_resizeContent:function(e,a,i){var n=t(".dialogContent",e);n.css({width:a-12+"px",height:i-t(".dialogHeader",e).outerHeight()-t(".dialogFooter",e).outerHeight()-6}),n.find("[layoutH]").layoutH(n),t(".pageContent",e).css("width",a-14+"px"),t(window).trigger("resizeGrid")}}}(jQuery),function(t){t.fn.dialogDrag=function(e){return"string"==typeof e&&"destroy"==e?this.each(function(){var e=this;t("div.dialogHeader",e).unbind("mousedown")}):this.each(function(){var e=t(this);t("div.dialogHeader",e).mousedown(function(a){return t.pdialog.switchDialog(e),e.data("task",!0),setTimeout(function(){e.data("task")&&t.dialogDrag.start(e,a)},100),!1}).mouseup(function(t){return e.data("task",!1),!1})})},t.dialogDrag={currId:null,_init:function(e){this.currId=(new Date).getTime();var a=t("#dialogProxy");a.size()||(a=t(DWZ.frag.dialogProxy),t("body").append(a)),t("h1",a).html(t(".dialogHeader h1",e).text())},start:function(e,a){this._init(e);var i=t("#dialogProxy");return i.css({left:e.css("left"),top:e.css("top"),height:e.css("height"),width:e.css("width"),zIndex:parseInt(e.css("zIndex"))+1}).show(),t("div.dialogContent",i).css("height",t("div.dialogContent",e).css("height")),i.data("dialog",e),e.css({left:"-10000px",top:"-10000px"}),t(".shadow").hide(),t(i).jDrag({selector:".dialogHeader",stop:this.stop,event:a}),!1},stop:function(){var e=t(arguments[0]),a=e.data("dialog");t(a).css({left:t(e).css("left"),top:t(e).css("top")}),t.pdialog.attachShadow(a),t(e).hide()}}}(jQuery),function(t){t.fn.extend({cssTable:function(e){return this.each(function(){var e=t(this),a=e.find("tbody>tr"),i=e.parent(),n=e.hasClass("nowrap");a.hoverClass("hover").each(function(e){var r=t(this);n||e%2!=1||r.addClass("trbg"),r.click(function(){a.filter(".selected").removeClass("selected"),r.addClass("selected");var e=r.attr("target");e&&(0==t("#"+e,i).size()&&i.prepend('<input id="'+e+'" type="hidden" />'),t("#"+e,i).val(r.attr("rel")))})}),e.find("thead [orderField]").orderBy({targetType:e.attr("targetType"),asc:e.attr("asc")||"asc",desc:e.attr("desc")||"desc"})})}})}(jQuery),function(t){t.fn.jTable=function(e){return this.each(function(){function a(){t("div.j-resizeGrid").each(function(){var e=t(this).innerWidth();e&&t("div.gridScroller",this).width(e+"px")})}for(var i=t(this),n=i.attr("nowrapTD"),r=i.width(),s=[],o=i.parent().addClass("j-resizeGrid"),l=t(this).attr("layoutH"),c=i.find("thead>tr:last-child").find("th"),d=0,u=c.size();u>d;d++){
var h=t(c[d]),f=[],p=h.innerWidth()-100*h.innerWidth()/r-2;f[0]=parseInt(p),f[1]=h.attr("align"),s[s.length]=f}t(this).wrap("<div class='grid'></div>");var g=i.parent().html(i.html()),v=g.find("thead");v.wrap("<div class='gridHeader'><div class='gridThead'><table style='width:"+(r-20)+"px;'></table></div></div>");var m=t(">tr:last-child",v),b=t(">th",m);t("th",v).each(function(){var e=t(this);e.html("<div class='gridCol' title='"+e.text()+"'>"+e.html()+"</div>")}),b.each(function(e){var a=t(this),i=s[e];a.addClass(i[1]).hoverClass("hover").removeAttr("align").removeAttr("width").width(i[0])}).filter("[orderField]").orderBy({targetType:i.attr("targetType"),asc:i.attr("asc")||"asc",desc:i.attr("desc")||"desc"});var x=g.find(">tbody"),k=l?" layoutH='"+l+"'":"";x.wrap("<div class='gridScroller'"+k+" style='width:"+o.width()+"px;'><div class='gridTbody'><table style='width:"+(r-20)+"px;'></table></div></div>");var y=t(">tr:first-child",x),$=x.find(">tr");$.hoverClass().each(function(){for(var e=t(this),a=t(">td",this),i=0;i<a.size();i++){var r=t(a[i]);"false"!=n&&r.html("<div>"+r.html()+"</div>"),i<s.length&&r.addClass(s[i][1]).width(s[i][0])}e.click(function(){$.filter(".selected").removeClass("selected"),e.addClass("selected");var a=e.attr("target");a&&(0==t("#"+a,g).size()&&g.prepend('<input id="'+a+'" type="hidden" />'),t("#"+a,g).val(e.attr("rel")))})}),g.append("<div class='resizeMarker' style='height:300px; left:57px;display:none;'></div><div class='resizeProxy' style='height:300px; left:377px;display:none;'></div>");var _=t(".gridScroller",g);_.scroll(function(e){var a=t(".gridThead",g);if(_.scrollLeft()>0){a.css("position","relative");var i=_.scrollLeft();a.css("left",_.cssv("left")-i)}return 0==_.scrollLeft()&&(a.css("position","relative"),a.css("left","0px")),!1}),t(">tr",v).each(function(){t(">th",this).each(function(a){var i=this,n=t(this);n.mouseover(function(a){var r=t.jTableTool.getOffset(i,a).offsetX;return n.outerWidth()-r<5?n.css("cursor","col-resize").mousedown(function(a){t(".resizeProxy",g).show().css({left:t.jTableTool.getRight(i)-t(".gridScroller",g).scrollLeft(),top:t.jTableTool.getTop(i),height:t.jTableTool.getHeight(i,g),cursor:"col-resize"}),t(".resizeMarker",g).show().css({left:t.jTableTool.getLeft(i)+1-t(".gridScroller",g).scrollLeft(),top:t.jTableTool.getTop(i),height:t.jTableTool.getHeight(i,g)}),t(".resizeProxy",g).jDrag(t.extend(e,{scop:!0,cellMinW:20,relObj:t(".resizeMarker",g)[0],move:"horizontal",event:a,stop:function(){var e=t(".resizeProxy",g).position().left,a=t(".resizeMarker",g).position().left,i=e-a-n.outerWidth()-9,r=(t.jTableTool.getColspan(n),t.jTableTool.getCellNum(n)),s=n.width(),o=n.width()+i,l=t(">td",y).eq(r-1);n.width(o+"px"),l.width(o+"px");var c=t(v).parent();c.width(c.width()-s+o+"px");var d=t(x).parent();d.width(d.width()-s+o+"px"),t(".resizeMarker,.resizeProxy",g).hide()}}))}):(n.css("cursor",n.attr("orderField")?"pointer":"default"),n.unbind("mousedown")),!1})})}),t(window).unbind("resizeGrid").bind("resizeGrid",a)})},t.jTableTool={getLeft:function(e){var a=0;return t(e).prevAll().each(function(){a+=t(this).outerWidth()}),a-1},getRight:function(e){var a=0;return t(e).prevAll().andSelf().each(function(){a+=t(this).outerWidth()}),a-1},getTop:function(e){var a=0;return t(e).parent().prevAll().each(function(){a+=t(this).outerHeight()}),a},getHeight:function(e,a){var i=0,n=t(e).parent();return n.nextAll().andSelf().each(function(){i+=t(this).outerHeight()}),t(".gridTbody",a).children().each(function(){i+=t(this).outerHeight()}),i},getCellNum:function(e){return t(e).prevAll().andSelf().size()},getColspan:function(e){return t(e).attr("colspan")||1},getStart:function(e){var a=1;return t(e).prevAll().each(function(){a+=parseInt(t(this).attr("colspan")||1)}),a},getPageCoord:function(t){for(var e={x:0,y:0};t;)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},getOffset:function(e,a){if(t.browser.msie){var i=t(e).offset(),n={offsetX:a.pageX||a.screenX,offsetY:a.pageY||a.screenY},r={offsetX:n.offsetX-i.left,offsetY:n.offsetY-i.top};return r}var s=a.target;void 0==s.offsetLeft&&(s=s.parentNode);var o=t.jTableTool.getPageCoord(s),l={x:window.pageXOffset+a.clientX,y:window.pageYOffset+a.clientY},r={offsetX:l.x-o.x,offsetY:l.y-o.y};return r}}}(jQuery),function(t){t.fn.extend({jTask:function(e){return this.each(function(){var e=t(this),a=e.attr("id");e.click(function(i){var n=t("body").data(a);return e.hasClass("selected")?t("a.minimize",n).trigger("click"):n.is(":hidden")?t.taskBar.restoreDialog(n):t(n).trigger("click"),t.taskBar.scrollCurrent(t(this)),!1}),t("div.close",e).click(function(e){return t.pdialog.close(a),!1}).hoverClass("closeHover"),e.hoverClass("hover")})}}),t.taskBar={_taskBar:null,_taskBox:null,_prevBut:null,_nextBut:null,_op:{id:"taskbar",taskBox:"div.taskbarContent",prevBut:".taskbarLeft",prevDis:"taskbarLeftDisabled",nextBut:".taskbarRight",nextDis:"taskbarRightDisabled",selected:"selected",boxMargin:"taskbarMargin"},init:function(e){var a=this;t.extend(this._op,e),this._taskBar=t("#"+this._op.id),0==this._taskBar.size()&&(this._taskBar=t(DWZ.frag.taskbar).appendTo(t("#layout")),this._taskBar.find(".taskbarLeft").hoverClass("taskbarLeftHover"),this._taskBar.find(".taskbarRight").hoverClass("taskbarRightHover")),this._taskBox=this._taskBar.find(this._op.taskBox),this._taskList=this._taskBox.find(">ul"),this._prevBut=this._taskBar.find(this._op.prevBut),this._nextBut=this._taskBar.find(this._op.nextBut),this._prevBut.click(function(t){a.scrollLeft()}),this._nextBut.click(function(t){a.scrollRight()}),this._contextmenu(this._taskBox)},_contextmenu:function(e){t(e).contextMenu("dialogCM",{bindings:{closeCurrent:function(e,a){var i=e.isTag("li")?e:t.taskBar._getCurrent();t("div.close",i).trigger("click")},closeOther:function(e,a){var i=e.isTag("li")?"#"+e.attr("id"):".selected",n=t.taskBar._taskList.find(">li:not(:"+i+")");n.each(function(e){t("div.close",n[e]).trigger("click")})},closeAll:function(e,a){var i=t.taskBar._getTasks();i.each(function(e){t("div.close",i[e]).trigger("click")})}},ctrSub:function(e,a){var i=a.find("[rel='closeCurrent']"),n=a.find("[rel='closeOther']");t.taskBar._getCurrent()[0]?1==t.taskBar._getTasks().size()&&n.addClass("disabled"):(i.addClass("disabled"),n.addClass("disabled"))}})},_scrollCurrent:function(){var e=this._tasksW(this._getTasks());if(e>this._getTaskBarW()){var a=this,i=t(">li:last-child",this._taskList),n=this._getTaskBarW()-i.position().left-i.outerWidth(!0);this._taskList.animate({left:n+"px"},200,function(){a._ctrlScrollBut()})}else this._ctrlScrollBut()},_getTaskBarW:function(){return this._taskBox.width()-(this._prevBut.is(":hidden")?this._prevBut.width()+2:0)-(this._nextBut.is(":hidden")?this._nextBut.width()+2:0)},_scrollTask:function(t){var e=this;if(t.position().left+this._getLeft()+t.outerWidth()>this._getBarWidth()){var a=this._getTaskBarW()-t.position().left-t.outerWidth(!0)-2;this._taskList.animate({left:a+"px"},200,function(){e._ctrlScrollBut()})}else if(t.position().left+this._getLeft()<0){var a=this._getLeft()-(t.position().left+this._getLeft());this._taskList.animate({left:a+"px"},200,function(){e._ctrlScrollBut()})}},_ctrlScrollBut:function(){var t=this._tasksW(this._getTasks());this._getTaskBarW()>t?(this._taskBox.removeClass(this._op.boxMargin),this._nextBut.hide(),this._prevBut.hide(),this._getTasks().eq(0)[0]&&this._scrollTask(this._getTasks().eq(0))):(this._taskBox.addClass(this._op.boxMargin),this._nextBut.show().removeClass(this._op.nextDis),this._prevBut.show().removeClass(this._op.prevDis),this._getLeft()>=0&&this._prevBut.addClass(this._op.prevDis),this._getLeft()<=this._getTaskBarW()-t&&this._nextBut.addClass(this._op.nextDis))},_getLeft:function(){return this._taskList.position().left},_visibleStart:function(){for(var t=this._getLeft(),e=this._getTasks(),a=0;a<e.size();a++)if(e.eq(a).position().left+e.eq(a).outerWidth(!0)+t>=0)return e.eq(a);return e.eq(0)},_visibleEnd:function(){for(var t=this._getLeft(),e=this._getTasks(),a=0;a<e.size();a++)if(e.eq(a).position().left+e.eq(a).outerWidth(!0)+t>this._getBarWidth())return e.eq(a);return e.eq(e.size()-1)},_getTasks:function(){return this._taskList.find(">li")},_tasksW:function(e){var a=0;return e.each(function(){a+=t(this).outerWidth(!0)}),a},_getBarWidth:function(){return this._taskBar.innerWidth(!0)},addDialog:function(e,a){this.show();var i=t("#"+e,this._taskList);if(i[0])t(">div>span",i).text(a);else{var n='<li id="#taskid#"><div class="taskbutton"><span>#title#</span></div><div class="close">Close</div></li>';this._taskList.append(n.replace("#taskid#",e).replace("#title#",a)),i=t("#"+e,this._taskList),i.jTask()}this._contextmenu(i),this.switchTask(e),this._scrollTask(i)},closeDialog:function(e){var a="string"==typeof e?t("#"+e,this._taskList):e;a.remove(),0==this._getTasks().size()&&this.hide(),this._scrollCurrent()},restoreDialog:function(e){var a="string"==typeof e?t("body").data(e):e,i="string"==typeof e?e:a.data("id"),n=t.taskBar.getTask(i);t(".resizable").css({top:t(window).height()-60,left:t(n).position().left,height:t(n).outerHeight(),width:t(n).outerWidth()}).show().animate({top:t(a).css("top"),left:t(a).css("left"),width:t(a).css("width"),height:t(a).css("height")},250,function(){t(this).hide(),t(a).show(),t.pdialog.attachShadow(a)}),t.taskBar.switchTask(i)},inactive:function(e){t("#"+e,this._taskList).removeClass("selected")},scrollLeft:function(){var t=this._visibleStart();this._scrollTask(t)},scrollRight:function(){var t=this._visibleEnd();this._scrollTask(t)},scrollCurrent:function(t){this._scrollTask(t)},switchTask:function(t){this._getCurrent().removeClass("selected"),this.getTask(t).addClass("selected")},_getCurrent:function(){return this._taskList.find(">.selected")},getTask:function(e){return t("#"+e,this._taskList)},show:function(){this._taskBar.is(":hidden")&&(this._taskBar.css("top",t(window).height()-34+this._taskBar.outerHeight()).show(),this._taskBar.animate({top:t(window).height()-this._taskBar.outerHeight()},500))},hide:function(){this._taskBar.animate({top:t(window).height()-29+this._taskBar.outerHeight(!0)},500,function(){t.taskBar._taskBar.hide()})}}}(jQuery),$.fn.extend({ajaxTodo:function(){return this.each(function(){var t=$(this);t.click(function(e){var a=unescape(t.attr("href")).replaceTmById($(e.target).parents(".unitBox:first"));if(DWZ.debug(a),!a.isFinishedTm())return alertMsg.error(t.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var i=t.attr("title");i?alertMsg.confirm(i,{okCall:function(){ajaxTodo(a,t.attr("callback"))}}):ajaxTodo(a,t.attr("callback")),e.preventDefault()})})},dwzExport:function(){function t(t){var e="dialog"==t.attr("targetType")?$.pdialog.getCurrent():navTab.getCurrentPanel(),a=$("#pagerForm",e),i=t.attr("href");window.location=i+(-1==i.indexOf("?")?"?":"&")+a.serialize()}return this.each(function(){var e=$(this);e.click(function(a){var i=e.attr("title");i?alertMsg.confirm(i,{okCall:function(){t(e)}}):t(e),a.preventDefault()})})}}),function(t){t.fn.extend({pagination:function(a){function i(t,e,a,i){t.bind("click",{pageNum:e},function(t){dwzPageBreak({targetType:a,rel:i,data:{pageNum:t.data.pageNum}}),t.preventDefault()})}var n={first$:"li.j-first",prev$:"li.j-prev",next$:"li.j-next",last$:"li.j-last",nums$:"li.j-num>a",jumpto$:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>'};return this.each(function(){for(var r=t(this),s=new e(a),o=s.getInterval(),l="",c=o.start;c<o.end;c++)l+=n.pageNumFrag.replaceAll("#pageNum#",c).replaceAll("#liClass#",c==s.getCurrentPage()?"selected j-num":"j-num");r.html(DWZ.frag.pagination.replaceAll("#pageNumFrag#",l).replaceAll("#currentPage#",s.getCurrentPage())).find("li").hoverClass();var d=r.find(n.first$),u=r.find(n.prev$),h=r.find(n.next$),f=r.find(n.last$);s.hasPrev()?(d.add(u).find(">span").hide(),i(u,s.getCurrentPage()-1,s.targetType(),s.rel()),i(d,1,s.targetType(),s.rel())):d.add(u).addClass("disabled").find(">a").hide(),s.hasNext()?(h.add(f).find(">span").hide(),i(h,s.getCurrentPage()+1,s.targetType(),s.rel()),i(f,s.numPages(),s.targetType(),s.rel())):h.add(f).addClass("disabled").find(">a").hide(),r.find(n.nums$).each(function(e){i(t(this),e+o.start,s.targetType(),s.rel())}),r.find(n.jumpto$).each(function(){var e=t(this),a=e.find(":text"),i=e.find(":button");i.click(function(t){var e=a.val();e&&e.isPositiveInteger()&&dwzPageBreak({targetType:s.targetType(),rel:s.rel(),data:{pageNum:e}})}),a.keyup(function(t){t.keyCode==DWZ.keyCode.ENTER&&i.click()})})})},orderBy:function(e){var a=t.extend({targetType:"navTab",rel:"",asc:"asc",desc:"desc"},e);return this.each(function(){var e=t(this).css({cursor:"pointer"}).click(function(){var t=e.attr("rel")||a.rel,i=e.attr("orderField"),n=e.hasClass(a.asc)?a.desc:a.asc;dwzPageBreak({targetType:a.targetType,rel:t,data:{orderField:i,orderDirection:n}})})})},pagerForm:function(e){var a=t.extend({pagerForm$:"#pagerForm",parentBox:document},e),i='<input type="hidden" name="#name#" value="#value#" />';return this.each(function(){var e=t(this),n=t(a.pagerForm$,a.parentBox),r=n.attr("action").replaceAll("#rel#",e.attr("action"));n.attr("action",r),e.find(":input").each(function(){var e=t(this),a=e.attr("name");if(a){var r=i.replaceAll("#name#",a).replaceAll("#value#",e.val());n.append(r)}})})}});var e=function(e){this.opts=t.extend({targetType:"navTab",rel:"",totalCount:0,numPerPage:10,pageNumShown:10,currentPage:1,callback:function(){return!1}},e)};t.extend(e.prototype,{targetType:function(){return this.opts.targetType},rel:function(){return this.opts.rel},numPages:function(){return Math.ceil(this.opts.totalCount/this.opts.numPerPage)},getInterval:function(){var t=Math.ceil(this.opts.pageNumShown/2),e=this.numPages(),a=e-this.opts.pageNumShown,i=this.getCurrentPage()>t?Math.max(Math.min(this.getCurrentPage()-t,a),0):0,n=this.getCurrentPage()>t?Math.min(this.getCurrentPage()+t,e):Math.min(this.opts.pageNumShown,e);return{start:i+1,end:n+1}},getCurrentPage:function(){var t=parseInt(this.opts.currentPage);return isNaN(t)?1:t},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.numPages()}})}(jQuery),function($){var _lookup={currentGroup:"",suffix:"",$target:null,pk:"id"},_util={_lookupPrefix:function(t){var e=_lookup.currentGroup?".":"";return _lookup.currentGroup+e+t+_lookup.suffix},lookupPk:function(t){return this._lookupPrefix(t)},lookupField:function(t){return"dwz."+this.lookupPk(t)}};$.extend({bringBackSuggest:function(args){var $box=_lookup.$target.parents(".unitBox:first");$box.find(":input").each(function(){var $input=$(this),inputName=$input.attr("name"),callbackinput=$input.attr("callback");for(var key in args){var name=_lookup.pk==key?_util.lookupPk(key):_util.lookupField(key);if(name==inputName){if($input.val(args[key]),callbackinput){var $callback=callbackinput;$.isFunction($callback)||($callback=eval("("+callbackinput+")")),$callback(args)}break}}})},bringBack:function(t){$.bringBackSuggest(t),$.pdialog.closeCurrent()}}),$.fn.extend({lookup:function(){return this.each(function(){var $this=$(this),options={mask:!0,width:$this.attr("width")||820,height:$this.attr("height")||400,maxable:eval($this.attr("maxable")||"true"),resizable:eval($this.attr("resizable")||"true")};$this.click(function(t){_lookup=$.extend(_lookup,{currentGroup:$this.attr("lookupGroup")||"",suffix:$this.attr("suffix")||"",$target:$this,pk:$this.attr("lookupPk")||"id"});var e=unescape($this.attr("href")).replaceTmById($(t.target).parents(".unitBox:first"));return e.isFinishedTm()?($.pdialog.open(e,"_blank",$this.attr("title")||$this.text(),options),!1):(alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1)})})},multLookup:function(){return this.each(function(){var t=$(this),e={};t.click(function(a){var i=t.parents(".unitBox:first");return i.find("[name='"+t.attr("multLookup")+"']").filter(":checked").each(function(){var t=DWZ.jsonEval($(this).val());for(var a in t){var i=e[a]?e[a]+",":"";e[a]=i+t[a]}}),$.isEmptyObject(e)?(alertMsg.error(t.attr("warn")||DWZ.msg("alertSelectMsg")),!1):void $.bringBack(e)})})},suggest:function(){var t={suggest$:"#suggest",suggestShadow$:"#suggestShadow"},e=-1;return this.each(function(){function a(e){var a=r.offset(),o=a.top+this.offsetHeight,l=$(t.suggest$);0==l.size()&&(l=$('<div id="suggest"></div>').appendTo($("body"))),l.css({left:a.left+"px",top:o+"px"}).show(),_lookup=$.extend(_lookup,{currentGroup:r.attr("lookupGroup")||"",suffix:r.attr("suffix")||"",$target:r,pk:r.attr("lookupPk")||"id"});var c=unescape(r.attr("suggestUrl")).replaceTmById($(e.target).parents(".unitBox:first"));return c.isFinishedTm()?($.ajax({type:"POST",dataType:"json",url:c,cache:!1,data:{inputValue:r.val()},success:function(t){if(t){var e="";$.each(t,function(t){for(var a="",i="",t=0;t<s.length;t++){var n=this[s[t]];n&&(i&&(i+="-"),i+=n,a&&(a+=","),a+=s[t]+":'"+n+"'")}e+='<li lookupId="'+this.id+'" lookupAttrs="'+a+'">'+i+"</li>"}),l.html("<ul>"+e+"</ul>").find("li").hoverClass("selected").click(function(){i($(this))})}},error:function(){l.html("")}}),$(document).bind("click",n),!1):(alertMsg.error(r.attr("warn")||DWZ.msg("alertSelectMsg")),!1)}function i(t){var e="{id:'"+t.attr("lookupId")+"',"+t.attr("lookupAttrs")+"}";$.bringBackSuggest(DWZ.jsonEval(e))}function n(){$(t.suggest$).html("").hide(),e=-1,$(document).unbind("click",n)}var r=$(this).attr("autocomplete","off").keydown(function(t){return t.keyCode==DWZ.keyCode.ENTER?!1:void 0}),s=r.attr("suggestFields").split(",");r.focus(a).click(!1).keyup(function(r){var s=$(t.suggest$).find("li");switch(r.keyCode){case DWZ.keyCode.ESC:case DWZ.keyCode.TAB:case DWZ.keyCode.SHIFT:case DWZ.keyCode.HOME:case DWZ.keyCode.END:case DWZ.keyCode.LEFT:case DWZ.keyCode.RIGHT:break;case DWZ.keyCode.ENTER:n();break;case DWZ.keyCode.DOWN:e>=s.size()-1?e=-1:e++;break;case DWZ.keyCode.UP:0>e?e=s.size()-1:e--;break;default:a(r)}if(s.removeClass("selected"),e>=0){var o=s.eq(e).addClass("selected");i(o)}})})},itemDetail:function(){function t(t){t.find(">tr").each(function(t){$(":input, a.btnLook",this).each(function(){var e=$(this);e.attr("name",e.attr("name").replaceSuffix(t));var a=e.attr("lookupGroup");a&&e.attr("lookupGroup",a.replaceSuffix(t));var i=e.attr("suffix");i&&e.attr("suffix",i.replaceSuffix(t))})})}function e(t){var e="",a="";t.name.endsWith("[#index#]")?a="[#index#]":t.name.endsWith("[]")&&(a="[]");var i=a?' suffix="'+a+'" ':"";switch(t.type){case"del":e='<a href="javascript:void(0)" class="btnDel '+t.fieldClass+'"></a>';break;case"lookup":var n="";t.suggestFields&&(n='autocomplete="off" lookupGroup="'+t.lookupGroup+'"'+i+' suggestUrl="'+t.suggestUrl+'" suggestFields="'+t.suggestFields+'"'),e='<input type="hidden" name="'+t.lookupGroup+".id"+a+'"/><input type="text" name="'+t.name+'"'+n+' size="'+t.size+'" class="'+t.fieldClass+'"/><a class="btnLook" href="'+t.lookupUrl+'" lookupGroup="'+t.lookupGroup+'" '+n+' title=""></a>';break;case"attach":e='<input type="hidden" name="'+t.lookupGroup+".id"+a+'"/><input type="text" name="'+t.name+'" size="'+t.size+'" readonly="readonly" class="'+t.fieldClass+'"/><a class="btnAttach" href="'+t.lookupUrl+'" lookupGroup="'+t.lookupGroup+'" '+n+' width="560" height="300" title=""></a>';break;case"enum":$.ajax({type:"POST",dataType:"html",async:!1,url:t.enumUrl,data:{inputName:t.name},success:function(t){e=t}});break;case"date":e='<input type="text" name="'+t.name+'" class="date '+t.fieldClass+'" format="'+t.patternDate+'" size="'+t.size+'"/><a class="inputDateButton" href="javascript:void(0)"></a>';break;default:e='<input type="text" name="'+t.name+'" size="'+t.size+'" class="'+t.fieldClass+'"/>'}return"<td>"+e+"</td>"}function a(t){var a="";return $(t).each(function(){a+=e(this)}),'<tr class="unitBox">'+a+"</tr>"}return this.each(function(){var e=$(this).css("clear","both"),i=e.find("tbody"),n=[];e.find("tr:first th[type]").each(function(){var t=$(this),e={type:t.attr("type")||"text",patternDate:t.attr("format")||"yyyy-MM-dd",name:t.attr("name")||"",size:t.attr("size")||"12",enumUrl:t.attr("enumUrl")||"",lookupGroup:t.attr("lookupGroup")||"",lookupUrl:t.attr("lookupUrl")||"",suggestUrl:t.attr("suggestUrl"),suggestFields:t.attr("suggestFields"),fieldClass:t.attr("fieldClass")||""};n.push(e)}),i.find("a.btnDel").click(function(){function e(){$.ajax({type:"POST",dataType:"json",url:a.attr("href"),cache:!1,success:function(){a.parents("tr:first").remove(),t(i)},error:DWZ.ajaxError})}var a=$(this);return a.attr("title")?alertMsg.confirm(a.attr("title"),{okCall:e}):e(),!1});var r=e.attr("addButton")||"Add New";if(r){var s=$('<div class="button"><div class="buttonContent"><button type="button">'+r+"</button></div></div>").insertBefore(e).find("button"),o=$('<input type="text" name="dwz_rowNum" class="textInput" style="margin:2px;" value="1" size="2"/>').insertBefore(e),l="";s.click(function(){l||(l=a(n));var e=1;try{e=parseInt(o.val())}catch(r){}for(var s=0;e>s;s++){var c=$(l);c.appendTo(i).initUI().find("a.btnDel").click(function(){return $(this).parents("tr:first").remove(),t(i),!1})}t(i)})}})},selectedTodo:function(){function _getIds(t,e){var a="",i="dialog"==e?$.pdialog.getCurrent():navTab.getCurrentPanel();return i.find("input:checked").filter("[name='"+t+"']").each(function(t){var e=$(this).val();a+=0==t?e:","+e}),a}return this.each(function(){var $this=$(this),selectedIds=$this.attr("rel")||"ids",postType=$this.attr("postType")||"map";$this.click(function(){function _doPost(){var callback=$this.attr("callback"),$callback=callback||navTabAjaxDone;$.isFunction($callback)||($callback=eval("("+callback+")")),$.ajax({type:"POST",url:$this.attr("href"),dataType:"json",cache:!1,data:function(){if("map"==postType)return $.map(ids.split(","),function(t,e){return{name:selectedIds,value:t}});var t={};return t[selectedIds]=ids,t}(),success:$callback,error:DWZ.ajaxError})}var ids=_getIds(selectedIds,$this.attr("targetType"));if(!ids)return alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var title=$this.attr("title");return title?alertMsg.confirm(title,{okCall:_doPost}):_doPost(),!1})})}})}(jQuery),function(t){t.setRegional("datepicker",{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),t.fn.datepicker=function(a){function i(e){var a=t(o.tmBox$);a.removeClass("hh").removeClass("mm").removeClass("ss"),e&&(a.addClass(e),t(o.tmInputs$).removeClass("slt").filter("."+e).addClass("slt"))}function n(e,a){t(o.tmBox$).find("."+a+" li").each(function(){var a=t(this);a.click(function(){e.val(a.text())})})}function r(t){return t.keyCode>=48&&t.keyCode<=57||t.keyCode==DWZ.keyCode.DELETE||t.keyCode==DWZ.keyCode.BACKSPACE?void 0:!1}function s(t,e){var a=parseInt(t.val()),i=parseInt(t.attr("start")),n=parseInt(t.attr("end"));1==e?n>a&&t.val(a+1):-1==e?a>i&&t.val(a-1):a>n?t.val(n):i>a&&t.val(i)}var o={box$:"#calendar",year$:"#calendar [name=year]",month$:"#calendar [name=month]",tmInputs$:"#calendar .time :text",hour$:"#calendar .time .hh",minute$:"#calendar .time .mm",second$:"#calendar .time .ss",tmBox$:"#calendar .tm",tmUp$:"#calendar .time .up",tmDown$:"#calendar .time .down",close$:"#calendar .close",calIcon$:"a.inputDateButton",main$:"#calendar .main",days$:"#calendar .days",dayNames$:"#calendar .dayNames",clearBut$:"#calendar .clearBut",okBut$:"#calendar .okBut"};return this.each(function(){function l(e){var a=e.getDateWrap(),l=new Date(a.year,a.month-1,1),u=l.getDay(),h="";if(u>0){l.setMonth(l.getMonth()-1);for(var f=e.getDateWrap(l),p=f.days-u+1;p<=f.days;p++)h+='<dd class="other" chMonth="-1" day="'+p+'">'+p+"</dd>"}for(var p=1;p<=a.days;p++)h+=p==a.day?'<dd class="slt" day="'+p+'">'+p+"</dd>":'<dd day="'+p+'">'+p+"</dd>";for(var p=1;p<=42-u-a.days;p++)h+='<dd class="other" chMonth="1" day="'+p+'">'+p+"</dd>";var g=t(o.days$).html(h).find("dd");if(g.click(function(){var a=t(this);d.val(e.formatDate(e.changeDay(a.attr("day"),a.attr("chMonth")))),e.hasTime()?(g.removeClass("slt"),a.addClass("slt")):c()}),e.hasDate()||t(o.main$).addClass("nodate"),e.hasTime()){t("#calendar .time").show();var v=t(o.hour$).val(a.hour).focus(function(){i("hh")}),m=t(o.minute$).val(a.minute).focus(function(){i("mm")}),b=t(o.second$).val(a.second).focus(function(){i("ss")});v.add(m).add(b).click(function(){return!1}),n(v,"hh"),n(m,"mm"),n(b,"ss"),t(o.box$).click(function(){i()});var x=t(o.tmInputs$);x.keydown(r).each(function(){var e=t(this);e.keyup(function(){s(e,0)})}),t(o.tmUp$).click(function(){x.filter(".slt").each(function(){s(t(this),1)})}),t(o.tmDown$).click(function(){x.filter(".slt").each(function(){s(t(this),-1)})}),e.hasHour()||v.attr("disabled",!0),e.hasMinute()||m.attr("disabled",!0),e.hasSecond()||b.attr("disabled",!0)}}function c(){t(o.box$).remove(),t(document).unbind("click",c)}var d=t(this);new e(d.val(),a);d.click(function(i){c();var n=new e(d.val(),a),r=d.offset(),s=r.top+this.offsetHeight;t(DWZ.frag.calendarFrag).appendTo("body").css({left:r.left+"px",top:s+"px"}).show().click(function(t){t.stopPropagation()}),t.fn.bgiframe&&t(o.box$).bgiframe();var u="";t.each(t.regional.datepicker.dayNames,function(t,e){u+="<dt>"+e+"</dt>"}),t(o.dayNames$).html(u);var h=n.getDateWrap(),f=t(o.year$),p=h.year+parseInt(n.get("yearstart")),g=h.year+parseInt(n.get("yearend"));for(y=p;y<=g;y++)f.append('<option value="'+y+'"'+(h.year==y?'selected="selected"':"")+">"+y+"</option>");var v=t(o.month$);t.each(t.regional.datepicker.monthNames,function(t,e){var a=t+1;v.append('<option value="'+a+'"'+(h.month==a?'selected="selected"':"")+">"+e+"</option>")}),l(n),f.add(v).change(function(){n.changeDate(f.val(),v.val()),l(n)});var m=t(o.box$).outerHeight(!0);return s>m&&s>t(window).height()-m&&t(o.box$).css("top",r.top-m),t(o.close$).click(function(){c()}),t(o.clearBut$).click(function(){d.val(""),c()}),t(o.okBut$).click(function(){var e=t(o.days$).find("dd.slt"),a=n.changeDay(e.attr("day"),e.attr("chMonth"));n.hasTime()&&(a.setHours(parseInt(t(o.hour$).val())),a.setMinutes(parseInt(t(o.minute$).val())),a.setSeconds(parseInt(t(o.second$).val()))),d.val(n.formatDate(a)),c()}),t(document).bind("click",c),!1}),d.parent().find(o.calIcon$).click(function(){return d.trigger("click"),!1})})};var e=function(e,a){this.opts=t.extend({pattern:"yyyy-MM-dd",yearstart:-10,yearend:10},a),this.sDate=e.trim()};t.extend(e.prototype,{get:function(t){return this.opts[t]},_getDays:function(t,e){return 2==e?t%4||!(t%100)&&t%400?28:29:/4|6|9|11/.test(e)?30:31},getDateWrap:function(t){t||(t=this.parseDate(this.sDate)||new Date);var e=t.getFullYear(),a=t.getMonth()+1,i=this._getDays(e,a);return{year:e,month:a,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),days:i,date:t}},changeDate:function(t,e,a){var i=new Date(t,e-1,a||1);return this.sDate=this.formatDate(i),i},changeDay:function(t,e){e||(e=0);var a=this.getDateWrap();return this.changeDate(a.year,a.month+parseInt(e),t)},parseDate:function(t){return t.parseDate(this.opts.pattern)},formatDate:function(t){return t.formatDate(this.opts.pattern)},hasHour:function(){return-1!=this.opts.pattern.indexOf("H")},hasMinute:function(){return-1!=this.opts.pattern.indexOf("m")},hasSecond:function(){return-1!=this.opts.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var t=["y","M","d","E"],e=0;e<t.length;e++)if(-1!=this.opts.pattern.indexOf(t[e]))return!0;return!1}})}(jQuery),function(t){t.extend(t.fn,{jBlindUp:function(e){var a=t.extend({duration:500,easing:"swing",call:function(){}},e);return this.each(function(){var e=t(this);t(this).animate({height:0},{step:function(){},duration:a.duration,easing:a.easing,complete:function(){e.css({display:"none"}),a.call()}})})},jBlindDown:function(e){var a=t.extend({to:0,duration:500,easing:"swing",call:function(){}},e);return this.each(function(){var e=t(this),i=a.to>0?a.to:t.effect.getDimensions(e[0]).height;e.animate({height:i},{step:function(){},duration:a.duration,easing:a.easing,complete:function(){e.css({display:""}),a.call()}})})},jSlideUp:function(e){var a=t.extend({to:0,duration:500,easing:"swing",call:function(){}},e);return this.each(function(){var e=t(this);e.wrapInner("<div></div>");var i=a.to>0?a.to:t.effect.getDimensions(t(">div",e)[0]).height;e.css({overflow:"visible",position:"relative"}),t(">div",e).css({position:"relative"}).animate({top:-i},{easing:a.easing,duration:a.duration,complete:function(){e.html(t(this).html())}}),e.animate({height:0},{duration:a.duration,easing:a.easing,complete:function(){e.css({display:"none",height:""}),a.call()}})})},jSlideDown:function(e){var a=t.extend({to:0,duration:500,easing:"swing",call:function(){}},e);return this.each(function(){var e=t(this),i=a.to>0?a.to:t.effect.getDimensions(e[0]).height;e.wrapInner('<div style="top:-'+i+'px;"></div>'),e.css({overflow:"visible",position:"relative",height:"0px"}).animate({height:i},{duration:a.duration,easing:a.easing,complete:function(){e.css({display:"",overflow:""}),a.call()}}),t(">div",e).css({position:"relative"}).animate({top:0},{easing:a.easing,duration:a.duration,complete:function(){e.html(t(this).html())}})})}}),t.effect={getDimensions:function(e,a){var i=new t.effect.Rectangle,n=t(e).css("display"),r=t(e).css("visibility"),s=0==t(e).height()?!0:!1;return t(e).is(":hidden")&&(t(e).css({visibility:"hidden",display:"block"}),s&&t(e).css("height",""),t.browser.opera&&refElement.focus()),i.height=t(e).height(),i.width=t(e).width(),"none"==n&&(t(e).css({visibility:r,display:"none"}),s&&s&&t(e).css("height","0px")),i}},t.effect.Rectangle=function(){this.width=0,this.height=0,this.unit="px"}}(jQuery),function(t){t.extend(t.fn,{jPanel:function(e){var a=t.extend({header:"panelHeader",headerC:"panelHeaderContent",content:"panelContent",coll:"collapsable",exp:"expandable",footer:"panelFooter",footerC:"panelFooterContent"},e);return this.each(function(){var e=t(this),i=e.hasClass("close"),n=e.hasClass("collapse"),r=t(">div",e).addClass(a.content),s=t(">h1",e).wrap("<div><div></div></div>");n&&t('<a href=""></a>').addClass(i?a.exp:a.coll).insertAfter(s);var o=t(">div:first",e).addClass(a.header);t(">div",o).addClass(a.headerC);var l=t("<div><div></div></div>").appendTo(e).addClass(a.footer);t(">div",l).addClass(a.footerC);var c=e.attr("defH")?e.attr("defH"):0,d=e.attr("minH")?e.attr("minH"):0;if(i?r.css({height:"0px",display:"none"}):(r.css("height","auto"),c>0?r.height(c+"px"):d>0&&r.css("minHeight",d+"px")),n){var u=t("a",o),h=r.innerHeight()-6;c=d>0&&d>=h?d:h,u.click(function(){return u.hasClass(a.exp)?r.jBlindDown({to:c,call:function(){u.removeClass(a.exp).addClass(a.coll),d>0&&r.css("minHeight",d+"px")}}):(d>0&&r.css("minHeight",""),d>=h&&r.css("height",d+"px"),r.jBlindUp({call:function(){u.removeClass(a.coll).addClass(a.exp)}})),!1})}})}})}(jQuery),function(t){t.fn.extend({checkboxCtrl:function(e){return this.each(function(){var a=t(this);a.click(function(){var i=a.attr("group");if(a.is(":checkbox")){var n=a.is(":checked")?"all":"none";i&&t.checkbox.select(i,n,e)}else i&&t.checkbox.select(i,a.attr("selectType")||"all",e)})})}}),t.checkbox={selectAll:function(t,e){this.select(t,"all",e)},unSelectAll:function(t,e){this.select(t,"none",e)},selectInvert:function(t,e){this.select(t,"invert",e)},select:function(e,a,i){switch($parent=t(i||document),$checkboxLi=$parent.find(":checkbox[name='"+e+"']"),a){case"invert":$checkboxLi.each(function(){$checkbox=t(this),$checkbox.attr("checked",!$checkbox.is(":checked"))});break;case"none":$checkboxLi.attr("checked",!1);break;default:$checkboxLi.attr("checked",!0)}}}}(jQuery),function(t){var e=[],a=function(i){t.each(e,function(n){e[n]!=i&&(t("#"+e[n])[0]?t("#op_"+e[n]).css({height:"",width:""}).hide():t("#op_"+e[n]).remove(),t(document).unbind("click",a))})};t.extend(t.fn,{comboxSelect:function(i,n){var r=t.extend({selector:">a"},n);return this.each(function(){var i=t(this),n=t(r.selector,i);e.push(i.attr("id")),t(r.selector,i).click(function(){var e=t("#op_"+i.attr("id"));
if(e.is(":hidden")){e.height()>300&&e.css({height:"300px",overflow:"scroll"});var n=i.offset().top+i[0].offsetHeight-50;n+e.height()>t(window).height()-20&&(n=t(window).height()-20-e.height()),e.css({top:n,left:i.offset().left}).show(),a(i.attr("id")),t(document).click(a)}else t(document).unbind("click",a),a();return!1}),t("#op_"+i.attr("id")).find(">li").comboxOption(n,i)})},comboxOption:function(e,a){return e.text(a.data("title")),this.each(function(){t(">a",this).click(function(){var i=t(this);i.parent().parent().find(".selected").removeClass("selected"),i.addClass("selected"),e.text(i.text());var n=t("select",a);if(n.val()!=i.attr("value")){a.attr("ref");t("select",a).val(i.attr("value")).trigger("change")}})})},combox:function(){var a=[];return t.each(e,function(i){t("#"+e[i])[0]?a.push(e[i]):t("#op_"+e[i]).remove()}),e=a,this.each(function(e){var a=t(this).removeClass("combox"),i=a.attr("name"),n=a.attr("value"),r=t("option[value="+n+"]",a).text(),s=a.attr("ref"),o=a.attr("refUrl")||"",l=a.attr("id")||Math.round(1e7*Math.random()),c='<div class="combox"><div id="combox_'+l+'" class="select"'+(s?' ref="'+s+'"':"")+">";c+='<a href="javascript:" class="'+a.attr("class")+'" name="'+i+'" value="'+n+'">'+r+"</a></div></div>";var d='<ul class="comboxop" id="op_combox_'+l+'">';t("option",a).each(function(){var e=t(this);d+='<li><a class="'+(n==e[0].value?"selected":"")+'" href="#" value="'+e[0].value+'">'+e[0].text+"</a></li>"}),d+="</ul>",t("body").append(d),a.after(c),t("div.select",a.next()).comboxSelect().append(a),s&&o&&a.bind("change",{},function(e){var i=t("#"+s);return 0==i.size()?!1:void t.ajax({type:"GET",dataType:"json",url:o.replace("{value}",a.attr("value")),cache:!1,data:{},success:function(e){if(e){var a="";t.each(e,function(t){e[t]&&e[t].length>1&&(a+='<option value="'+e[t][0]+'">'+e[t][1]+"</option>")});var n=i.parents("div.combox:first");i.html(a).insertAfter(n),n.remove(),i.trigger("change").combox()}},error:DWZ.ajaxError})})})}})}(jQuery),function(t){t.extend({History:{_hash:new Array,_cont:void 0,_currentHash:"",_callback:void 0,init:function(e,a){t.History._cont=e,t.History._callback=a;var i=location.hash.replace(/\?.*$/,"");if(t.History._currentHash=i,t.browser.msie){""==t.History._currentHash&&(t.History._currentHash="#"),t("body").prepend('<iframe id="jQuery_history" style="display: none;"></iframe>');var n=t("#jQuery_history")[0],r=n.contentDocument||n.contentWindow.document;r.open(),r.close(),r.location.hash=i}t.isFunction(this._callback)&&t.History._callback(i.skipChar("#")),setInterval(t.History._historyCheck,100)},_historyCheck:function(){var e="";if(t.browser.msie){var a=t("#jQuery_history")[0],i=a.contentWindow;e=i.location.hash.skipChar("#").replace(/\?.*$/,"")}else e=location.hash.skipChar("#").replace(/\?.*$/,"");e!=t.History._currentHash&&(t.History._currentHash=e,t.History.loadHistory(e))},addHistory:function(e,a,i){t.History._currentHash=e;var n=[e,a,i];if(t.History._hash.push(n),t.browser.msie){var r=t("#jQuery_history")[0],s=r.contentDocument||r.contentWindow.document;s.open(),s.close(),s.location.hash=e.replace(/\?.*$/,""),location.hash=e.replace(/\?.*$/,"")}else location.hash=e.replace(/\?.*$/,"")},loadHistory:function(e){t.browser.msie&&(location.hash=e);for(var a=0;a<t.History._hash.length;a+=1)if(t.History._hash[a][0]==e)return void t.History._hash[a][1](t.History._hash[a][2])}}})}(jQuery);